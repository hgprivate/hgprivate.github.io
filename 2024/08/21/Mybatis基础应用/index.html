<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta media="(prefers-color-scheme: light)" content=#222 name=theme-color><meta media="(prefers-color-scheme: dark)" content=#222 name=theme-color><meta content="Hexo 7.3.0" name=generator><link href=/images/apple-touch-icon-next.png rel=apple-touch-icon sizes=180x180><link href=/images/favicon-32x32-next.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16-next.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><link href=/css/main.css rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity=sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"hgprivate.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta content="1、MyBatis基础1.1、概述1.1.1、简介MyBatis是一款优秀的持久层框架，支持自定义SQL、存储过程以及高级映射。MyBatis免除了几乎所有的JDBC代码以及设置参数和获取结果集的工作。MyBatis可以通过简单的XML或注解配置和映射原始类型、接口和Java POJO（Plain Old Java Objects，普通老式Java对象）为数据库中的记录。 Mybatis可以自定义" name=description><meta content=article property=og:type><meta content=MyBatis系列-MyBatis基础应用 property=og:title><meta content=https://hgprivate.github.io/2024/08/21/Mybatis%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/index.html property=og:url><meta content=豪哥博客 property=og:site_name><meta content="1、MyBatis基础1.1、概述1.1.1、简介MyBatis是一款优秀的持久层框架，支持自定义SQL、存储过程以及高级映射。MyBatis免除了几乎所有的JDBC代码以及设置参数和获取结果集的工作。MyBatis可以通过简单的XML或注解配置和映射原始类型、接口和Java POJO（Plain Old Java Objects，普通老式Java对象）为数据库中的记录。 Mybatis可以自定义" property=og:description><meta content=zh_CN property=og:locale><meta content=2024-08-21T13:39:13.987Z property=article:published_time><meta content=2024-10-28T18:38:36.041Z property=article:modified_time><meta content=豪哥 property=article:author><meta content=MyBatis property=article:tag><meta content=MyBatis基础 property=article:tag><meta content=summary name=twitter:card><link href=https://hgprivate.github.io/2024/08/21/Mybatis%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hgprivate.github.io/2024/08/21/Mybatis%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/","path":"2024/08/21/Mybatis基础应用/","title":"MyBatis系列-MyBatis基础应用"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>MyBatis系列-MyBatis基础应用 | 豪哥博客</title><noscript><link href=/css/noscript.css rel=stylesheet></noscript><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>豪哥博客</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>豪哥博客</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#1%E3%80%81MyBatis%E5%9F%BA%E7%A1%80><span class=nav-number>1.</span> <span class=nav-text>1、MyBatis基础</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#1-1%E3%80%81%E6%A6%82%E8%BF%B0><span class=nav-number>1.1.</span> <span class=nav-text>1.1、概述</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>1.1.1.</span> <span class=nav-text>1.1.1、简介</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-2%E3%80%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF><span class=nav-number>1.1.2.</span> <span class=nav-text>1.1.2、使用场景</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-3%E3%80%81%E4%BC%98%E7%BC%BA%E7%82%B9><span class=nav-number>1.1.3.</span> <span class=nav-text>1.1.3、优缺点</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-2%E3%80%81Mapper%E6%8E%A5%E5%8F%A3><span class=nav-number>1.2.</span> <span class=nav-text>1.2、Mapper接口</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-1%E3%80%81%E6%8E%A5%E5%8F%A3%E7%BB%91%E5%AE%9A><span class=nav-number>1.2.1.</span> <span class=nav-text>1.2.1、接口绑定</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-2%E3%80%81%E4%BC%A0%E5%8F%82><span class=nav-number>1.2.2.</span> <span class=nav-text>1.2.2、传参</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1-2-2-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>1.2.2.1.</span> <span class=nav-text>1.2.2.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-2-2-2%E3%80%81%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89><span class=nav-number>1.2.2.2.</span> <span class=nav-text>1.2.2.2、使用注解（推荐）</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-2-2-3%E3%80%81%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95><span class=nav-number>1.2.2.3.</span> <span class=nav-text>1.2.2.3、使用索引</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-2-2-4%E3%80%81%E4%BD%BF%E7%94%A8Map><span class=nav-number>1.2.2.4.</span> <span class=nav-text>1.2.2.4、使用Map</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-3%E3%80%81%E5%8E%9F%E7%90%86><span class=nav-number>1.2.3.</span> <span class=nav-text>1.2.3、原理</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-3%E3%80%81XML%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6><span class=nav-number>1.3.</span> <span class=nav-text>1.3、XML映射文件</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-1%E3%80%81XML%E6%A0%87%E7%AD%BE><span class=nav-number>1.3.1.</span> <span class=nav-text>1.3.1、XML标签</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-2%E3%80%81%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4><span class=nav-number>1.3.2.</span> <span class=nav-text>1.3.2、命名空间</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-3%E3%80%81%E5%AD%97%E6%AE%B5%E6%98%A0%E5%B0%84><span class=nav-number>1.3.3.</span> <span class=nav-text>1.3.3、字段映射</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1-3-3-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>1.3.3.1.</span> <span class=nav-text>1.3.3.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-3-3-2%E3%80%81%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D><span class=nav-number>1.3.3.2.</span> <span class=nav-text>1.3.3.2、定义别名</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-3-3-3%E3%80%81%E8%AE%BE%E7%BD%AEresultMap><span class=nav-number>1.3.3.3.</span> <span class=nav-text>1.3.3.3、设置resultMap</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-4%E3%80%81%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2><span class=nav-number>1.3.4.</span> <span class=nav-text>1.3.4、关联查询</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-5%E3%80%81%E5%8A%A8%E6%80%81SQL><span class=nav-number>1.3.5.</span> <span class=nav-text>1.3.5、动态SQL</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1-3-5-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>1.3.5.1.</span> <span class=nav-text>1.3.5.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-3-5-2%E3%80%81%E5%8E%9F%E7%90%86><span class=nav-number>1.3.5.2.</span> <span class=nav-text>1.3.5.2、原理</span></a></ol></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#2%E3%80%81%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5><span class=nav-number>2.</span> <span class=nav-text>2、增删改查</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#2-1%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C><span class=nav-number>2.1.</span> <span class=nav-text>2.1、查询操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-1%E3%80%81%E6%A6%82%E8%BF%B0><span class=nav-number>2.1.1.</span> <span class=nav-text>2.1.1、概述</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-2%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2><span class=nav-number>2.1.2.</span> <span class=nav-text>2.1.2、模糊查询</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-2-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>2.1.2.1.</span> <span class=nav-text>2.1.2.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-2-2%E3%80%81%E5%88%86%E7%B1%BB><span class=nav-number>2.1.2.2.</span> <span class=nav-text>2.1.2.2、分类</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-3%E3%80%81%E5%BB%B6%E8%BF%9F%E6%9F%A5%E8%AF%A2><span class=nav-number>2.1.3.</span> <span class=nav-text>2.1.3、延迟查询</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-3-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>2.1.3.1.</span> <span class=nav-text>2.1.3.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-3-2%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4><span class=nav-number>2.1.3.2.</span> <span class=nav-text>2.1.3.2、使用步骤</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-3-3%E3%80%81%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86><span class=nav-number>2.1.3.3.</span> <span class=nav-text>2.1.3.3、底层原理</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-4%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2><span class=nav-number>2.1.4.</span> <span class=nav-text>2.1.4、分页查询</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-4-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>2.1.4.1.</span> <span class=nav-text>2.1.4.1、简介</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-1-4-2%E3%80%81%E5%88%86%E9%A1%B5%E5%8E%9F%E7%90%86><span class=nav-number>2.1.4.2.</span> <span class=nav-text>2.1.4.2、分页原理</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-5%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2><span class=nav-number>2.1.5.</span> <span class=nav-text>2.1.5、一对多查询</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-6%E3%80%81%E5%A4%9A%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2><span class=nav-number>2.1.6.</span> <span class=nav-text>2.1.6、多对一查询</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#2-2%E3%80%81%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C><span class=nav-number>2.2.</span> <span class=nav-text>2.2、插入操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-2-1%E3%80%81%E8%87%AA%E5%A2%9E%E9%95%BF%E9%94%AE%E5%80%BC><span class=nav-number>2.2.1.</span> <span class=nav-text>2.2.1、自增长键值</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#2-2-2%E3%80%81%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5><span class=nav-number>2.2.2.</span> <span class=nav-text>2.2.2、批量插入</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#2-2-2-1%E3%80%81foreach%E6%A0%87%E7%AD%BE%E6%A8%A1%E5%BC%8F><span class=nav-number>2.2.2.1.</span> <span class=nav-text>2.2.2.1、foreach标签模式</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-2-2-2%E3%80%81ExecutorType-BATCH%E6%A8%A1%E5%BC%8F><span class=nav-number>2.2.2.2.</span> <span class=nav-text>2.2.2.2、ExecutorType.BATCH模式</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-2-2-3%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F><span class=nav-number>2.2.2.3.</span> <span class=nav-text>2.2.2.3、数据库批量插入模式</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-2-2-4%E3%80%81%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E6%A8%A1%E5%BC%8F><span class=nav-number>2.2.2.4.</span> <span class=nav-text>2.2.2.4、第三方工具模式</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#2-3%E3%80%81%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C><span class=nav-number>2.3.</span> <span class=nav-text>2.3、删除操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-3-1%E3%80%81%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4><span class=nav-number>2.3.1.</span> <span class=nav-text>2.3.1、批量删除</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#3%E3%80%81%E7%BC%93%E5%AD%98><span class=nav-number>3.</span> <span class=nav-text>3、缓存</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#3-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>3.1.</span> <span class=nav-text>3.1、简介</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#3-2%E3%80%81%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98><span class=nav-number>3.2.</span> <span class=nav-text>3.2、一级缓存</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#3-2-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>3.2.1.</span> <span class=nav-text>3.2.1、简介</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-2-2%E3%80%81%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88><span class=nav-number>3.2.2.</span> <span class=nav-text>3.2.2、缓存失效</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#3-3%E3%80%81%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98><span class=nav-number>3.3.</span> <span class=nav-text>3.3、二级缓存</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>3.3.1.</span> <span class=nav-text>3.3.1、简介</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-2%E3%80%81%E5%BC%80%E5%90%AF%E6%9D%A1%E4%BB%B6><span class=nav-number>3.3.2.</span> <span class=nav-text>3.3.2、开启条件</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-3%E3%80%81%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88><span class=nav-number>3.3.3.</span> <span class=nav-text>3.3.3、缓存失效</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-4%E3%80%81%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0><span class=nav-number>3.3.4.</span> <span class=nav-text>3.3.4、配置参数</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#3-4%E3%80%81EhCache%E7%BC%93%E5%AD%98><span class=nav-number>3.4.</span> <span class=nav-text>3.4、EhCache缓存</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#3-4-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>3.4.1.</span> <span class=nav-text>3.4.1、简介</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-4-2%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4><span class=nav-number>3.4.2.</span> <span class=nav-text>3.4.2、使用步骤</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#4%E3%80%81%E6%8F%92%E4%BB%B6><span class=nav-number>4.</span> <span class=nav-text>4、插件</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#4-1%E3%80%81%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86><span class=nav-number>4.1.</span> <span class=nav-text>4.1、底层原理</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#4-2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6><span class=nav-number>4.2.</span> <span class=nav-text>4.2、自定义插件</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#4-3%E3%80%81%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6><span class=nav-number>4.3.</span> <span class=nav-text>4.3、分页插件</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%80%BB%E7%BB%93><span class=nav-number>5.</span> <span class=nav-text>总结</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%AF%B9%E6%AF%94><span class=nav-number>5.1.</span> <span class=nav-text>实体类对比</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#POJO><span class=nav-number>5.1.1.</span> <span class=nav-text>POJO</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Java-Bean><span class=nav-number>5.1.2.</span> <span class=nav-text>Java Bean</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Entity><span class=nav-number>5.1.3.</span> <span class=nav-text>Entity</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#DTO><span class=nav-number>5.1.4.</span> <span class=nav-text>DTO</span></a></ol></ol></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt=豪哥 class=site-author-image itemprop=image src=/static/imgs/avatar.png><p class=site-author-name itemprop=name>豪哥<div class=site-description itemprop=description>豪哥博客</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>117</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>36</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>129</span> <span class=site-state-item-name>标签</span></a></div></nav></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://hgprivate.github.io/2024/08/21/Mybatis%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=/static/imgs/avatar.png itemprop=image> <meta content=豪哥 itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=豪哥博客 itemprop=name> <meta content=豪哥博客 itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="MyBatis系列-MyBatis基础应用 | 豪哥博客" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>MyBatis系列-MyBatis基础应用</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2024-08-21 21:39:13" datetime=2024-08-21T21:39:13+08:00>2024-08-21</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-29 02:38:36" datetime=2024-10-29T02:38:36+08:00 itemprop=dateModified>2024-10-29</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/MyBatis/ itemprop=url rel=index><span itemprop=name>MyBatis</span></a> </span> </span></div></div></header><div class=post-body itemprop=articleBody><h1 id=1、MyBatis基础><a class=headerlink href=#1、MyBatis基础 title=1、MyBatis基础></a>1、MyBatis基础</h1><h2 id=1-1、概述><a class=headerlink href=#1-1、概述 title=1.1、概述></a>1.1、概述</h2><h3 id=1-1-1、简介><a class=headerlink href=#1-1-1、简介 title=1.1.1、简介></a>1.1.1、简介</h3><p><strong>MyBatis是一款优秀的持久层框架，支持自定义SQL、存储过程以及高级映射</strong>。MyBatis免除了几乎所有的JDBC代码以及设置参数和获取结果集的工作。MyBatis可以通过简单的XML或注解配置和映射原始类型、接口和Java POJO（Plain Old Java Objects，普通老式Java对象）为数据库中的记录。<p><strong>Mybatis可以自定义SQL来执行，故称为半自动 ORM 映射工具。</strong><blockquote><p>MyBatis与Hibernate的区别如下：<ol><li>MyBatis是一个半自动ORM 框架，Hibernate是一个全自动ORM框架。<li>MyBatis灵活度高，适用于 对关系数据模型要求不高的场景，但数据库无关性差；Hibernate反之。</ol></blockquote><h3 id=1-1-2、使用场景><a class=headerlink href=#1-1-2、使用场景 title=1.1.2、使用场景></a>1.1.2、使用场景</h3><ol><li>MyBatis 专注于 SQL 本身，是一个足够灵活的持久层框架。<li>对性能要求很高，或需求变化大的项目。</ol><h3 id=1-1-3、优缺点><a class=headerlink href=#1-1-3、优缺点 title=1.1.3、优缺点></a>1.1.3、优缺点</h3><p>优点如下：<ol><li>降低与代码的耦合，手动编写SQL，灵活度高；<li>与 JDBC 相比，代码量较少；<li>兼容多种数据库（MyBatis 基于 JDBC 实现，故 JDBC 支持的 MyBatis 都支持）；<li>可与 Spring 完美集成；<li>提供映射标签，支持对象与数据库的 ORM 字段关系映射；</ol><p>缺点如下：<ol><li>SQL编写工作量稍大；<li>SQL本身依赖于数据库，数据库移植性差；</ol><h2 id=1-2、Mapper接口><a class=headerlink href=#1-2、Mapper接口 title=1.2、Mapper接口></a>1.2、Mapper接口</h2><h3 id=1-2-1、接口绑定><a class=headerlink href=#1-2-1、接口绑定 title=1.2.1、接口绑定></a>1.2.1、接口绑定</h3><p>接口绑定定义：<strong>Dao接口中的方法 与 mapper xml中的 SQL 进行绑定。</strong>调用接口方法即可实现执行SQL。<p>接口绑定有两种实现方式：<ol><li><strong>注解绑定</strong>：在接口的方法上添加注解<code>@Select、@Update</code>等，然后在注解中直接编写SQL来绑定；<li><strong>MapperXML绑定</strong>：xml 映射文件中的 namespace 属性值必须为接口的全路径名。</ol><blockquote><p>建议：SQL较简单时用注解绑定，较复杂时用 xml 绑定。xml 绑定方式使用较多<p>注意事项：接口不能重载，因底层使用<em><strong>全限名+方法名</strong></em>作为保存和寻找策略。</blockquote><h3 id=1-2-2、传参><a class=headerlink href=#1-2-2、传参 title=1.2.2、传参></a>1.2.2、传参</h3><h4 id=1-2-2-1、简介><a class=headerlink href=#1-2-2-1、简介 title=1.2.2.1、简介></a>1.2.2.1、简介</h4><p>调用Mapper接口方法就会执行MapperXML中对应的SQL，当Mapper接口方法有参数，且在执行MapperXML中的SQL时需要使用接口传递过来的参数，那么可以通过两个取值表达式来实现。这两个表达式如下：<ul><li>**#{}**：预编译处理，占位符赋值。在处理时会替换为?号，调用 PreparedStatement 的 set 方法来赋值。该表达式可以防止SQL注入。<li>**${}**：字符串拼接替换。在处理时会直接替换成变量的值。</ul><p>参数的名字是什么分以下几种情况：<ul><li>mapper接口方法参数为<strong>基础包装类型</strong>：参数名字为arg0、arg1…，或param1、param2…。<li>mapper接口方法参数为<strong>基础包装类型且使用注解@Param修饰形参</strong>：参数名字为注解中自定义的字符，或param1、param2…。<li>mapper接口方法参数为<strong>map类型</strong>：参数名字为map中的key。<li>mapper接口方法参数为<strong>实体类类型</strong>：参数名字为实体类中的set和get方法名字去掉set和get字符后剩下的字符的小写形式。例如，方法名为getId()，那么参数名字为id。</ul><h4 id=1-2-2-2、使用注解（推荐）><a class=headerlink href=#1-2-2-2、使用注解（推荐） title=1.2.2.2、使用注解（推荐）></a>1.2.2.2、使用注解（推荐）</h4><p>Java代码如下：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">usermapper</span> {</span><br><span class=line>    user <span class="title function_">selectuser</span><span class=params>(<span class=meta>@param(“username”)</span> string username, <span class=meta>@param(“hashedpassword”)</span> string hashedpassword)</span>;</span><br><span class=line>}</span><br></pre></table></figure><p>Mapper XML中使用方式：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>”selectuser”</span> <span class=attr>resulttype</span>=<span class=string>”user”</span>></span></span><br><span class=line>    select id, username, hashedpassword</span><br><span class=line>    from some_table</span><br><span class=line>    where username = #{username}</span><br><span class=line>    and hashedpassword = #{hashedpassword}</span><br><span class=line><span class=tag>&LT/<span class=name>select</span>></span></span><br></pre></table></figure><h4 id=1-2-2-3、使用索引><a class=headerlink href=#1-2-2-3、使用索引 title=1.2.2.3、使用索引></a>1.2.2.3、使用索引</h4><p>Java代码如下：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=comment>// 对应xml来说，#{0}代表接收的第一个参数name，#{1}代表接收第二个参数area，以此类推。</span></span><br><span class=line><span class=keyword>public</span> User <span class="title function_">selectUser</span><span class=params>(String name, String area)</span>;</span><br></pre></table></figure><p>Mapper XML中使用方式：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>"selectUser"</span> <span class=attr>resultMap</span>=<span class=string>"BaseResultMap"</span>></span></span><br><span class=line>    select * fromuser_user_t</span><br><span class=line>    whereuser_name = #{0}</span><br><span class=line>    anduser_area=#{1}</span><br><span class=line><span class=tag>&LT/<span class=name>select</span>></span></span><br></pre></table></figure><h4 id=1-2-2-4、使用Map><a class=headerlink href=#1-2-2-4、使用Map title=1.2.2.4、使用Map></a>1.2.2.4、使用Map</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=comment>// 映射文件的命名空间.SQL 片段的 ID，就可以调用对应的映射文件中的 SQL</span></span><br><span class=line><span class=comment>// 由于我们的参数超过了两个，而方法中只有一个 Object 参数收集，因此我们使用 Map 集合来装载我们的参数</span></span><br><span class=line>Map < String, Object > map = <span class=keyword>new</span> <span class="title class_">HashMap</span>();</span><br><span class=line>map.put(<span class=string>"start"</span>, start);</span><br><span class=line>map.put(<span class=string>"end"</span>, end);</span><br><span class=line><span class=keyword>return</span> sqlSession.selectList(<span class=string>"StudentID.pagination"</span>, map);</span><br></pre></table></figure><h3 id=1-2-3、原理><a class=headerlink href=#1-2-3、原理 title=1.2.3、原理></a>1.2.3、原理</h3><p>namespace 是接口全限名；MapperStatement id是接口方法名；传递给 sql 的参数是接口方法参数。<p>把 <strong>接口全限名+方法名</strong> 作为 key可定位一个MapperStatement。Mybatis 中的<code>&LTselect></code>、<code>&LTinsert></code>、<code>&LTupdate></code>、<code>&LTdelete></code>标签都会被解析成一个<code>MapperStatement</code>对象。<p><strong>MyBatis 使用JDK动态代理为 Mapper接口生成代理对象，代理对象会拦截对接口方法的调用，转而执行 MapperStatement 中的SQL，最后将 SQL 执行结果返回</strong>。<h2 id=1-3、XML映射文件><a class=headerlink href=#1-3、XML映射文件 title=1.3、XML映射文件></a>1.3、XML映射文件</h2><h3 id=1-3-1、XML标签><a class=headerlink href=#1-3-1、XML标签 title=1.3.1、XML标签></a>1.3.1、XML标签</h3><p>SQL映射文件中只有少数几个顶级标签元素：<ol><li><strong>cache</strong>：当前命名空间的缓存配置。<li><strong>cache-ref</strong>：引用其它命名空间的缓存配置。<li><strong>resultMap</strong>：描述如何从数据库结果集中加载对象。<li><strong>parameterMap</strong>：老式风格的参数映射。该标签已被废弃，推荐使用行内参数映射。<li><strong>sql</strong>：可被其它语句引用的可重用语句块。<li><strong>insert</strong>：映射插入语句。<li><strong>update</strong>：映射更新语句。<li><strong>delete</strong>：映射删除语句。<li><strong>select</strong>：映射查询语句。</ol><p>除了上面几个顶级标签外，<strong>还有9个动态sql标签</strong>。<h3 id=1-3-2、命名空间><a class=headerlink href=#1-3-2、命名空间 title=1.3.2、命名空间></a>1.3.2、命名空间</h3><p>如果Mapper XML中配置了namespace，不同xml中的SQL语句所在的标签中的id可以重复。因为namespace+id 会当作 Map 的 key 来使用，如果没有 namespace，id重复会造成数据覆盖。<h3 id=1-3-3、字段映射><a class=headerlink href=#1-3-3、字段映射 title=1.3.3、字段映射></a>1.3.3、字段映射</h3><h4 id=1-3-3-1、简介><a class=headerlink href=#1-3-3-1、简介 title=1.3.3.1、简介></a>1.3.3.1、简介</h4><p>查询到数据后会将查询结果数据映射封装到实体类或集合容器中，要注意的是，sql查询字段需要与实体类中的属性相同。当数据库表字段与Java实体类字段不同时需要进行处理，处理方法有：定义别名、resultMap映射等。<p><strong>MyBatis 通过反射创建对象，然后初始化对象属性，无映射关系的属性无法完成初始化</strong>。<p>ResultMap VS ResultType<ol><li>resultMap 可实现延迟加载，而 resultType 无法实现；<li>无特殊要求情况下，查询选择 resultType，否则选择 resultMap；<li>使用 resultType 时通过 pojo 对象来实现结果集映射；<li>使用 resultMap 时，利用 association 和 collection 可实现一对多、多对多的结果映射；</ol><h4 id=1-3-3-2、定义别名><a class=headerlink href=#1-3-3-2、定义别名 title=1.3.3.2、定义别名></a>1.3.3.2、定义别名</h4><p>通过在 SQL 中定义字段别名：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>”selectorder”</span> <span class=attr>parametertype</span>=<span class=string>”int”</span> <span class=attr>resultetype</span>=<span class=string>”me.gacl.domain.order”</span>></span></span><br><span class=line>    select order_id id, order_no orderno, order_price price </span><br><span class=line>    from orders </span><br><span class=line>    where order_id=#{id};</span><br><span class=line><span class=tag>&LT/<span class=name>select</span>></span></span><br></pre></table></figure><h4 id=1-3-3-3、设置resultMap><a class=headerlink href=#1-3-3-3、设置resultMap title=1.3.3.3、设置resultMap></a>1.3.3.3、设置resultMap</h4><p>通过映射字段名和实体类属性名来达到一致：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>type</span>=<span class=string>”me.gacl.domain.order”</span> <span class=attr>id</span>=<span class=string>”orderresultmap”</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>”id”</span> <span class=attr>column</span>=<span class=string>”order_id”</span>></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>property</span> = <span class=string>“orderno”</span> <span class=attr>column</span> =<span class=string>”order_no”/</span>></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>”price”</span> <span class=attr>column</span>=<span class=string>”order_price”</span> /></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br><span class=line>    </span><br><span class=line><span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>"getOrder"</span> <span class=attr>parameterType</span>=<span class=string>"int"</span>  <span class=attr>resultMap</span>=<span class=string>"orderresultmap"</span>></span></span><br><span class=line>    select * from orders where order_id = #{id}</span><br><span class=line><span class=tag>&LT/<span class=name>select</span>></span></span><br></pre></table></figure><h3 id=1-3-4、关联查询><a class=headerlink href=#1-3-4、关联查询 title=1.3.4、关联查询></a>1.3.4、关联查询</h3><p>关联查询有 联合查询 和 嵌套查询 两种方式：<ul><li><strong>联合查询</strong>：几个表连接后只查询一次，使用resultMap来作为结果的返回类型。<li><strong>嵌套查询</strong>：先查一个表，然后根据该表返回结果中的外键 id再去查询另一个表。</ul><p>代码实现<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>mapper</span> <span class=attr>namespace</span>=<span class=string>"com.lcb.mapping.userMapper"</span>></span></span><br><span class=line>    <span class=comment>&LT!--association 一对一或多对一关联查询 --></span></span><br><span class=line>    <span class=tag><<span class=name>resultMap</span> <span class=attr>type</span>=<span class=string>"com.lcb.user.Classes"</span> <span class=attr>id</span>=<span class=string>"ClassesResultMap"</span>></span></span><br><span class=line>        <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>"id"</span> <span class=attr>column</span>=<span class=string>"c_id"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>"name"</span> <span class=attr>column</span>=<span class=string>"c_name"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>association</span> <span class=attr>property</span>=<span class=string>"teacher"</span> <span class=attr>javaType</span>=<span class=string>"com.lcb.user.Teacher"</span>></span></span><br><span class=line>            <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>"id"</span> <span class=attr>column</span>=<span class=string>"t_id"</span>/></span></span><br><span class=line>            <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>"name"</span> <span class=attr>column</span>=<span class=string>"t_name"</span>/></span></span><br><span class=line>        <span class=tag>&LT/<span class=name>association</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>resultMap</span>></span></span><br><span class=line>    <span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>"getClass"</span> <span class=attr>parameterType</span>=<span class=string>"int"</span> <span class=attr>resultMap</span>=<span class=string>"ClassesResultMap"</span>></span></span><br><span class=line>        select * </span><br><span class=line>        from class c, teacher t</span><br><span class=line>        where c.teacher_id = t.t_id and c.c_id = #{id}</span><br><span class=line>    <span class=tag>&LT/<span class=name>select</span>></span></span><br><span class=line>    </span><br><span class=line>    <span class=comment>&LT!--collection 一对多关联查询 --></span></span><br><span class=line>    <span class=tag><<span class=name>resultMap</span> <span class=attr>type</span>=<span class=string>"com.lcb.user.Classes"</span> <span class=attr>id</span>=<span class=string>"ClassesResultMap2"</span>></span></span><br><span class=line>        <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>"id"</span> <span class=attr>column</span>=<span class=string>"c_id"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>"name"</span> <span class=attr>column</span>=<span class=string>"c_name"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>association</span> <span class=attr>property</span>=<span class=string>"teacher"</span> <span class=attr>javaType</span>=<span class=string>"com.lcb.user.Teacher"</span>></span></span><br><span class=line>            <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>"id"</span> <span class=attr>column</span>=<span class=string>"t_id"</span>/></span></span><br><span class=line>            <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>"name"</span> <span class=attr>column</span>=<span class=string>"t_name"</span>/></span></span><br><span class=line>        <span class=tag>&LT/<span class=name>association</span>></span></span><br><span class=line>        <span class=tag><<span class=name>collection</span> <span class=attr>property</span>=<span class=string>"student"</span> <span class=attr>ofType</span>=<span class=string>"com.lcb.user.Student"</span>></span></span><br><span class=line>            <span class=tag><<span class=name>id</span> <span class=attr>property</span>=<span class=string>"id"</span> <span class=attr>column</span>=<span class=string>"s_id"</span>/></span></span><br><span class=line>            <span class=tag><<span class=name>result</span> <span class=attr>property</span>=<span class=string>"name"</span> <span class=attr>column</span>=<span class=string>"s_name"</span>/></span></span><br><span class=line>        <span class=tag>&LT/<span class=name>collection</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>resultMap</span>></span></span><br><span class=line>    <span class=tag><<span class=name>select</span> <span class=attr>id</span>=<span class=string>"getClass2"</span> <span class=attr>parameterType</span>=<span class=string>"int"</span> <span class=attr>resultMap</span>=<span class=string>"ClassesResultMap2"</span>></span></span><br><span class=line>        select * </span><br><span class=line>        from class c, teacher t, student s </span><br><span class=line>        where c.teacher_id = t.t_id and c.c_id = s.class_id and c.c_id = #{id}</span><br><span class=line>    <span class=tag>&LT/<span class=name>select</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>mapper</span>></span></span><br></pre></table></figure><h3 id=1-3-5、动态SQL><a class=headerlink href=#1-3-5、动态SQL title=1.3.5、动态SQL></a>1.3.5、动态SQL</h3><h4 id=1-3-5-1、简介><a class=headerlink href=#1-3-5-1、简介 title=1.3.5.1、简介></a>1.3.5.1、简介</h4><p>在 Xml 映射文件内以标签形式编写动态SQL，可以满足不同业务逻辑的需要。<p>常见动态标签有：<em><strong>if、trim、where、set、foreach、when、choose、bind、otherwise；</strong></em><h4 id=1-3-5-2、原理><a class=headerlink href=#1-3-5-2、原理 title=1.3.5.2、原理></a>1.3.5.2、原理</h4><p>原理：<strong>根据 表达式值 完成 逻辑判断 和 SQL动态拼接</strong>。<h1 id=2、增删改查><a class=headerlink href=#2、增删改查 title=2、增删改查></a>2、增删改查</h1><h2 id=2-1、查询操作><a class=headerlink href=#2-1、查询操作 title=2.1、查询操作></a>2.1、查询操作</h2><h3 id=2-1-1、概述><a class=headerlink href=#2-1-1、概述 title=2.1.1、概述></a>2.1.1、概述</h3><p>查询一条数据时，返回值类型可以是实体类、集合Map<p>查询多条数据时，返回值类型可以选择：集合List、集合Map+泛型（方法使用注解@MapKey来标识，在该注解中可从查询结果中选择某个字段来作为Map的键。）<h3 id=2-1-2、模糊查询><a class=headerlink href=#2-1-2、模糊查询 title=2.1.2、模糊查询></a>2.1.2、模糊查询</h3><h4 id=2-1-2-1、简介><a class=headerlink href=#2-1-2-1、简介 title=2.1.2.1、简介></a>2.1.2.1、简介</h4><p>在SQL中使用通配符<code>%</code>可以实现模糊查询。<h4 id=2-1-2-2、分类><a class=headerlink href=#2-1-2-2、分类 title=2.1.2.2、分类></a>2.1.2.2、分类</h4><p>（1）双引号 + #{} + %（推荐）<figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>select</span> <span class=operator>*</span> <span class=keyword>from</span> foo <span class=keyword>where</span> bar <span class=keyword>like</span> "%"#{<span class=keyword>value</span>}"%";</span><br></pre></table></figure><p>（2）单引号 + ${} + %<figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>select</span> <span class=operator>*</span> <span class=keyword>from</span> foo <span class=keyword>where</span> bar <span class=keyword>like</span> <span class=string>'%${value}%'</span>;</span><br></pre></table></figure><p>（3）通过concat函数拼接<figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>select</span> <span class=operator>*</span> <span class=keyword>from</span> foo <span class=keyword>where</span> bar <span class=keyword>like</span> concat(<span class=string>'%'</span>, #{name}, <span class=string>'%'</span>);</span><br></pre></table></figure><p>（4）通过StringBuilder拼接%和参数值，xml中直接使用#{}<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=type>String</span> <span class=variable>searchText</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">StringBuilder</span>(<span class=string>"%"</span>).append(text).append(<span class=string>"%"</span>).toString();</span><br><span class=line><span class=comment>// sql</span></span><br><span class=line>select * from foo where bar like #{value}</span><br></pre></table></figure><p><font color=red>注意：在SQL语句中拼接通配符易导致SQL注入，不推荐该种方式。</font><h3 id=2-1-3、延迟查询><a class=headerlink href=#2-1-3、延迟查询 title=2.1.3、延迟查询></a>2.1.3、延迟查询</h3><h4 id=2-1-3-1、简介><a class=headerlink href=#2-1-3-1、简介 title=2.1.3.1、简介></a>2.1.3.1、简介</h4><p><strong>Mybatis 仅支持 association 关联对象和 collection 关联集合对象的延迟加载</strong>。<h4 id=2-1-3-2、使用步骤><a class=headerlink href=#2-1-3-2、使用步骤 title=2.1.3.2、使用步骤></a>2.1.3.2、使用步骤</h4><p><strong>（1）开启延迟加载功能</strong><p>在mybatis配置文件中settings标签中进行配置。<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>settings</span>></span></span><br><span class=line>	<span class=tag><<span class=name>setting</span> <span class=attr>name</span>=<span class=string>"lazyLoadingEnabled"</span> <span class=attr>value</span>=<span class=string>"true"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>setting</span> <span class=attr>name</span>=<span class=string>"aggressiveLazyLoading"</span> <span class=attr>value</span>=<span class=string>"false"</span>/></span></span><br><span class=line><span class=tag>&LT/<span class=name>settings</span>></span></span><br></pre></table></figure><p><strong>（2）mapper xml中配置多对一映射</strong><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"empResult3"</span> <span class=attr>type</span>=<span class=string>"Emp"</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"e_id"</span> <span class=attr>property</span>=<span class=string>"eId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_name"</span> <span class=attr>property</span>=<span class=string>"eName"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_age"</span> <span class=attr>property</span>=<span class=string>"eAge"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_gender"</span> <span class=attr>property</span>=<span class=string>"eGender"</span>/></span></span><br><span class=line>    <span class=comment>&LT!-- fetchType表示提取类型，可取值为eaager（立即加载）、lazy（延迟加载）。 --></span></span><br><span class=line>    <span class=tag><<span class=name>association</span> <span class=attr>property</span>=<span class=string>"dept"</span> <span class=attr>select</span>=<span class=string>"cn.shh.mybatis.mapper.DeptMapper.getDeptById"</span> </span></span><br><span class=line><span class=tag>                 <span class=attr>column</span>=<span class=string>"d_id"</span> <span class=attr>fetchType</span>=<span class=string>"lazy/eager"</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>association</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br><span class=line></span><br><span class=line><span class=tag><<span class=name>selec</span> <span class=attr>id</span>=<span class=string>"getEmpById"</span> <span class=attr>parameterType</span>=<span class=string>"int"</span> <span class=attr>resultMap</span>=<span class=string>"empResult3"</span>></span></span><br><span class=line>	select * from tbl_emp e left join tbl_dept d on e.d_id = d.d_id where e.e_id = #{eId}</span><br><span class=line><span class=tag>&LT/<span class=name>selec</span>></span></span><br></pre></table></figure><h4 id=2-1-3-3、底层原理><a class=headerlink href=#2-1-3-3、底层原理 title=2.1.3.3、底层原理></a>2.1.3.3、底层原理</h4><p>原理就是<strong>使用 CGLIB 创建目标对象的代理对象，调用目标方法时先进入拦截器方法执行相关操作</strong>。<p>比如：调用 a.getB().getName()，拦截器 invoke()方法发现 a.getB()是null 值，那么就会单独发送事先保存好的查询关联 B 对象的 sql，把 B 查询出来并调用 a.setB(b)进行初始化，然后调用getName()方法获取结果。这就是延迟加载基本原理。<blockquote><p>其它 持久层框架 延迟加载原理 与MyBatis一样。</blockquote><h3 id=2-1-4、分页查询><a class=headerlink href=#2-1-4、分页查询 title=2.1.4、分页查询></a>2.1.4、分页查询</h3><h4 id=2-1-4-1、简介><a class=headerlink href=#2-1-4-1、简介 title=2.1.4.1、简介></a>2.1.4.1、简介</h4><p><strong>Mybatis通过 RowBounds 对象进行分页，通过操作 ResultSet 结果集实现内存分页，而非物理分页</strong>。<p>注意：可编写分页SQL完成物理分页功能，也可使用分页插件来完成物理分页。<h4 id=2-1-4-2、分页原理><a class=headerlink href=#2-1-4-2、分页原理 title=2.1.4.2、分页原理></a>2.1.4.2、分页原理</h4><p>基本原理是 <strong>通过实现Mybatis插件接口来自定义插件，插件会拦截待执行SQL，并重写SQL来实现分页</strong>。<h3 id=2-1-5、一对多查询><a class=headerlink href=#2-1-5、一对多查询 title=2.1.5、一对多查询></a>2.1.5、一对多查询</h3><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- 方式一：collection --></span></span><br><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"deptResult"</span> <span class=attr>type</span>=<span class=string>"Dept"</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"d_id"</span> <span class=attr>property</span>=<span class=string>"dId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"d_name"</span> <span class=attr>property</span>=<span class=string>"dName"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>collection</span> <span class=attr>property</span>=<span class=string>"emps"</span> <span class=attr>ofType</span>=<span class=string>"Emp"</span>></span></span><br><span class=line>    	<span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"e_id"</span> <span class=attr>property</span>=<span class=string>"eId"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_name"</span> <span class=attr>property</span>=<span class=string>"eName"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_age"</span> <span class=attr>property</span>=<span class=string>"eAge"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_gender"</span> <span class=attr>property</span>=<span class=string>"eGender"</span>/></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>collection</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br><span class=line></span><br><span class=line><span class=comment>&LT!-- 方式二：分步查询 --></span></span><br><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"deptResult2"</span> <span class=attr>type</span>=<span class=string>"Dept"</span>></span></span><br><span class=line>	<span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"d_id"</span> <span class=attr>property</span>=<span class=string>"dId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"d_name"</span> <span class=attr>property</span>=<span class=string>"dName"</span>/></span></span><br><span class=line>    <span class=comment>&LT!-- fetch表示数据提取方式，可取值lazy和eager，eager表示立即加载，lazy表示延迟加载 --></span></span><br><span class=line>    <span class=tag><<span class=name>collection</span> <span class=attr>property</span>=<span class=string>"emps"</span> <span class=attr>fetch</span>=<span class=string>"lazy|eager"</span> <span class=attr>select</span>=<span class=string>"cn.shh.mybatis.mapper.EmpMapper.getEmpById"</span> <span class=attr>column</span>=<span class=string>"d_id"</span>/></span></span><br><span class=line><span class=tag>&LT/<span class=name>resultMap</span>></span></span><br></pre></table></figure><h3 id=2-1-6、多对一查询><a class=headerlink href=#2-1-6、多对一查询 title=2.1.6、多对一查询></a>2.1.6、多对一查询</h3><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- 方式一：级联查询 --></span></span><br><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"empResult"</span> <span class=attr>type</span>=<span class=string>"Emp"</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"e_id"</span> <span class=attr>property</span>=<span class=string>"eId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_name"</span> <span class=attr>property</span>=<span class=string>"eName"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_age"</span> <span class=attr>property</span>=<span class=string>"eAge"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_gender"</span> <span class=attr>property</span>=<span class=string>"eGender"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"d_id"</span> <span class=attr>property</span>=<span class=string>"dept.dId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"d_name"</span> <span class=attr>property</span>=<span class=string>"dept.dName"</span>/></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br><span class=line></span><br><span class=line><span class=comment>&LT!-- 方式二：association --></span></span><br><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"empResult2"</span> <span class=attr>type</span>=<span class=string>"Emp"</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"e_id"</span> <span class=attr>property</span>=<span class=string>"eId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_name"</span> <span class=attr>property</span>=<span class=string>"eName"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_age"</span> <span class=attr>property</span>=<span class=string>"eAge"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_gender"</span> <span class=attr>property</span>=<span class=string>"eGender"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>association</span> <span class=attr>property</span>=<span class=string>"dept"</span> <span class=attr>javaType</span>=<span class=string>"Dept"</span>></span></span><br><span class=line>    	<span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"d_id"</span> <span class=attr>property</span>=<span class=string>"dId"</span>/></span></span><br><span class=line>        <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"d_name"</span> <span class=attr>property</span>=<span class=string>"dName"</span>/></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>association</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br><span class=line></span><br><span class=line><span class=comment>&LT!-- 方式三：分步查询 --></span></span><br><span class=line><span class=tag><<span class=name>resultMap</span> <span class=attr>id</span>=<span class=string>"empResult3"</span> <span class=attr>type</span>=<span class=string>"Emp"</span>></span></span><br><span class=line>    <span class=tag><<span class=name>id</span> <span class=attr>column</span>=<span class=string>"e_id"</span> <span class=attr>property</span>=<span class=string>"eId"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_name"</span> <span class=attr>property</span>=<span class=string>"eName"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_age"</span> <span class=attr>property</span>=<span class=string>"eAge"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>result</span> <span class=attr>column</span>=<span class=string>"e_gender"</span> <span class=attr>property</span>=<span class=string>"eGender"</span>/></span></span><br><span class=line>    <span class=comment>&LT!-- fetch表示数据提取方式，可取值lazy和eager，eager表示立即加载，lazy表示延迟加载 --></span></span><br><span class=line>    <span class=tag><<span class=name>association</span> <span class=attr>property</span>=<span class=string>"dept"</span> <span class=attr>fetch</span>=<span class=string>"lazy|eager"</span> <span class=attr>select</span>=<span class=string>"cn.shh.mybatis.mapper.DeptMapper.getDeptById"</span> <span class=attr>column</span>=<span class=string>"d_id"</span>></span><span class=tag>&LT/<span class=name>association</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>reslutMap</span>></span></span><br></pre></table></figure><h2 id=2-2、插入操作><a class=headerlink href=#2-2、插入操作 title=2.2、插入操作></a>2.2、插入操作</h2><h3 id=2-2-1、自增长键值><a class=headerlink href=#2-2-1、自增长键值 title=2.2.1、自增长键值></a>2.2.1、自增长键值</h3><p><strong>insert 方法总是返回一个 int 值，该值表示插入行数</strong>。<p>如果采用自增长策略，自动生成的键值在 insert 方法执行完后会被设置到传入的参数对象中。<p>java代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> <span class=keyword>void</span> <span class="title function_">save</span><span class=params>()</span>{</span><br><span class=line>    <span class=type>User</span> <span class=variable>u</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">User</span>();</span><br><span class=line>    u.setname(“fred”);</span><br><span class=line>    <span class=type>int</span> <span class=variable>rows</span> <span class=operator>=</span> mapper.saveUser(u);</span><br><span class=line>    system.out.println(“插入行数 = ” + rows);</span><br><span class=line>    system.out.println(“自增长值 = ” + u.getid());</span><br><span class=line>}</span><br></pre></table></figure><p>xml代码：<p>参数<code>usegeneratedkeys</code>可设置是否开启自动生成ID值。参数<code>keyproperty</code>用来设置接收生成的ID值。<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>insert</span> <span class=attr>id</span>=<span class=string>”saveUser”</span> <span class=attr>usegeneratedkeys</span>=<span class=string>”true”</span> <span class=attr>keyproperty</span>=<span class=string>”id”</span>></span></span><br><span class=line>    insert into users(name) values(#{name})</span><br><span class=line><span class=tag>&LT/<span class=name>insert</span>></span></span><br></pre></table></figure><h3 id=2-2-2、批量插入><a class=headerlink href=#2-2-2、批量插入 title=2.2.2、批量插入></a>2.2.2、批量插入</h3><h4 id=2-2-2-1、foreach标签模式><a class=headerlink href=#2-2-2-1、foreach标签模式 title=2.2.2.1、foreach标签模式></a>2.2.2.1、foreach标签模式</h4><p>java代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=comment>// java代码</span></span><br><span class=line>List&LTYourType> dataList = ...;</span><br><span class=line>yourMapper.insertBatch(dataList);</span><br></pre></table></figure><p>xml代码：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>insert</span> <span class=attr>id</span>=<span class=string>"insertBatch"</span> <span class=attr>parameterType</span>=<span class=string>"list"</span>></span></span><br><span class=line>    INSERT INTO table_name (column1, column2, column3)</span><br><span class=line>    VALUES</span><br><span class=line>    <span class=tag><<span class=name>foreach</span> <span class=attr>collection</span>=<span class=string>"list"</span> <span class=attr>item</span>=<span class=string>"item"</span> <span class=attr>separator</span>=<span class=string>","</span>></span></span><br><span class=line>        (#{item.column1}, #{item.column2}, #{item.column3})</span><br><span class=line>    <span class=tag>&LT/<span class=name>foreach</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>insert</span>></span></span><br></pre></table></figure><p>优点：<ul><li>实现简单，适合小批量数据的插入操作。</ul><p>缺点：<ul><li>如果数据量较大，生成的SQL语句也会较大，可能会超出数据库的SQL语句长度限制。<li>性能较差，因为数据量增多时SQL拼接和执行效率较低。</ul><p>适用场景： 适用于小规模的数据批量插入操作（例如上百条左右）。<h4 id=2-2-2-2、ExecutorType-BATCH模式><a class=headerlink href=#2-2-2-2、ExecutorType-BATCH模式 title=2.2.2.2、ExecutorType.BATCH模式></a>2.2.2.2、ExecutorType.BATCH模式</h4><p>java代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=type>SqlSession</span> <span class=variable>sqlSession</span> <span class=operator>=</span> sqlSessionFactory.openSession(ExecutorType.BATCH);</span><br><span class=line><span class=type>YourMapper</span> <span class=variable>mapper</span> <span class=operator>=</span> sqlSession.getMapper(YourMapper.class);</span><br><span class=line><span class=keyword>try</span> {</span><br><span class=line>    <span class=keyword>for</span> (YourType item : dataList) {</span><br><span class=line>        mapper.insert(item);</span><br><span class=line>    }</span><br><span class=line>    sqlSession.commit();</span><br><span class=line>} <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>    sqlSession.rollback();</span><br><span class=line>    <span class=keyword>throw</span> e;</span><br><span class=line>} <span class=keyword>finally</span> {</span><br><span class=line>    sqlSession.close();</span><br><span class=line>}</span><br></pre></table></figure><p>优点：<ul><li>减少了数据库连接次数，性能相比逐条插入有较大提升。<li>不受SQL语句长度限制，适用于中大规模的数据批量插入。</ul><p>缺点：<ul><li>需要手动管理事务和<code>sqlSession</code>。<li>出错时难以定位具体的出错数据。</ul><p>适用场景： 适合中等规模的数据批量插入操作。<h4 id=2-2-2-3、数据库批量插入模式><a class=headerlink href=#2-2-2-3、数据库批量插入模式 title=2.2.2.3、数据库批量插入模式></a>2.2.2.3、数据库批量插入模式</h4><p>有些数据库（如MySQL、PostgreSQL）支持批量插入的语法，可以将多条数据一次性插入。例如在MySQL中，可以使用<code>INSERT INTO ... VALUES ...</code>的多值格式，这种方式通常会在性能上有所提升。<p>xml代码：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>insert</span> <span class=attr>id</span>=<span class=string>"insertBatch"</span> <span class=attr>parameterType</span>=<span class=string>"list"</span>></span></span><br><span class=line>    INSERT INTO table_name (column1, column2, column3)</span><br><span class=line>    VALUES</span><br><span class=line>    <span class=tag><<span class=name>foreach</span> <span class=attr>collection</span>=<span class=string>"list"</span> <span class=attr>item</span>=<span class=string>"item"</span> <span class=attr>separator</span>=<span class=string>","</span>></span></span><br><span class=line>        (#{item.column1}, #{item.column2}, #{item.column3})</span><br><span class=line>    <span class=tag>&LT/<span class=name>foreach</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>insert</span>></span></span><br></pre></table></figure><p>优点：<ul><li>效率较高，能充分利用数据库的批量插入特性。</ul><p>缺点：<ul><li>依赖于数据库的特性，可能在不支持批量插入的数据库中不可用。</ul><p>适用场景： 适用于MySQL和PostgreSQL等支持批量插入语法的数据库。<h4 id=2-2-2-4、第三方工具模式><a class=headerlink href=#2-2-2-4、第三方工具模式 title=2.2.2.4、第三方工具模式></a>2.2.2.4、第三方工具模式</h4><p>可以利用一些第三方库（如Spring的<code>JdbcTemplate</code>）或MyBatis插件来实现批量插入。这些工具和插件内部会优化批量插入的效率，例如Spring的<code>JdbcTemplate</code>会将批量插入作为一条命令进行执行。<p>java代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=meta>@Autowired</span></span><br><span class=line><span class=keyword>private</span> JdbcTemplate jdbcTemplate;</span><br><span class=line></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">insertBatch</span><span class=params>(List&LTYourType> dataList)</span> {</span><br><span class=line>    <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"INSERT INTO table_name (column1, column2, column3) VALUES (?, ?, ?)"</span>;</span><br><span class=line>    List&LTObject[]> batchArgs = <span class=keyword>new</span> <span class="title class_">ArrayList</span><>();</span><br><span class=line>    <span class=keyword>for</span> (YourType item : dataList) {</span><br><span class=line>        batchArgs.add(<span class=keyword>new</span> <span class="title class_">Object</span>[] { item.getColumn1(), item.getColumn2(), item.getColumn3() });</span><br><span class=line>    }</span><br><span class=line>    jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class=line>}</span><br></pre></table></figure><p>优点：<ul><li>插入效率高，适合大规模批量操作。<li>能有效管理事务，错误时回滚数据。</ul><p>缺点：<ul><li>增加了项目的依赖和复杂度。</ul><p>适用场景： 适合对性能有较高要求的批量插入操作场景。<blockquote><p>推荐使用<strong>ExecutorType.BATCH模式</strong>或<strong>数据库特定的批量插入语法</strong>，根据实际的需求和数据库类型选择最合适的方案。</blockquote><h2 id=2-3、删除操作><a class=headerlink href=#2-3、删除操作 title=2.3、删除操作></a>2.3、删除操作</h2><h3 id=2-3-1、批量删除><a class=headerlink href=#2-3-1、批量删除 title=2.3.1、批量删除></a>2.3.1、批量删除</h3><p><strong>（1）使用foreach标签批量删除</strong><p>java代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line>List&LTInteger> idsToDelete = Arrays.asList(<span class=number>1</span>, <span class=number>2</span>, <span class=number>3</span>, <span class=number>4</span>, <span class=number>5</span>);</span><br><span class=line>yourMapper.deleteBatch(idsToDelete);</span><br></pre></table></figure><p>xml代码：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>delete</span> <span class=attr>id</span>=<span class=string>"deleteBatch"</span> <span class=attr>parameterType</span>=<span class=string>"list"</span>></span></span><br><span class=line>    DELETE FROM table_name</span><br><span class=line>    WHERE id IN</span><br><span class=line>    <span class=tag><<span class=name>foreach</span> <span class=attr>collection</span>=<span class=string>"list"</span> <span class=attr>item</span>=<span class=string>"id"</span> <span class=attr>open</span>=<span class=string>"("</span> <span class=attr>separator</span>=<span class=string>","</span> <span class=attr>close</span>=<span class=string>")"</span>></span></span><br><span class=line>        #{id}</span><br><span class=line>    <span class=tag>&LT/<span class=name>foreach</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>delete</span>></span></span><br></pre></table></figure><p><strong>（2）使用ExecutorType.BATCH模式批量删除</strong><p>代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=type>SqlSession</span> <span class=variable>sqlSession</span> <span class=operator>=</span> sqlSessionFactory.openSession(ExecutorType.BATCH);</span><br><span class=line><span class=type>YourMapper</span> <span class=variable>mapper</span> <span class=operator>=</span> sqlSession.getMapper(YourMapper.class);</span><br><span class=line><span class=keyword>try</span> {</span><br><span class=line>    <span class=keyword>for</span> (Integer id : idsToDelete) {</span><br><span class=line>        mapper.deleteById(id);</span><br><span class=line>    }</span><br><span class=line>    sqlSession.commit();</span><br><span class=line>} <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>    sqlSession.rollback();</span><br><span class=line>    <span class=keyword>throw</span> e;</span><br><span class=line>} <span class=keyword>finally</span> {</span><br><span class=line>    sqlSession.close();</span><br><span class=line>}</span><br></pre></table></figure><h1 id=3、缓存><a class=headerlink href=#3、缓存 title=3、缓存></a>3、缓存</h1><h2 id=3-1、简介><a class=headerlink href=#3-1、简介 title=3.1、简介></a>3.1、简介</h2><p>当需要查询并加载数据库中的数据时，会先检查缓存中是否已经存在需要的数据，如果存在则直接读取缓冲中的数据并返回，如果不存才会从数据库中查询。<p>检查缓存的顺序如下：<ol><li>先查二级缓存，因为二级缓存可能已经执行了查询操作。<li>如果二级缓存没有，再查找一级缓存。<li>如果一级缓存也没有，则查询数据库。<li>SqlSession关闭后，一级缓存中的数据会写入二级缓存中。</ol><h2 id=3-2、一级缓存><a class=headerlink href=#3-2、一级缓存 title=3.2、一级缓存></a>3.2、一级缓存</h2><h3 id=3-2-1、简介><a class=headerlink href=#3-2-1、简介 title=3.2.1、简介></a>3.2.1、简介</h3><p><strong>一级缓存是基于PerpetualCache的HashMap本地缓存，作用域为 Session，默认打开</strong>。<h3 id=3-2-2、缓存失效><a class=headerlink href=#3-2-2、缓存失效 title=3.2.2、缓存失效></a>3.2.2、缓存失效</h3><p>一级缓存失效的四种情况：<ol><li>不同的SqlSession对应不同的一级缓存。<li>同一个SqlSession，但查询条件不同。<li>同一个SqlSession，两次查询期间执行了其它增删改操作。<li>同一个SqlSeesion，两次查询期间手动清空了缓存。（调用了clearCahche()方法）</ol><h2 id=3-3、二级缓存><a class=headerlink href=#3-3、二级缓存 title=3.3、二级缓存></a>3.3、二级缓存</h2><h3 id=3-3-1、简介><a class=headerlink href=#3-3-1、简介 title=3.3.1、简介></a>3.3.1、简介</h3><p><strong>二级缓存是基于PerpetualCache的HashMap本地缓存，作用域为Mapper(Namespace)，可自定义存储源</strong>。<h3 id=3-3-2、开启条件><a class=headerlink href=#3-3-2、开启条件 title=3.3.2、开启条件></a>3.3.2、开启条件</h3><p>二级缓存开启条件：<ol><li>在核心配置文件中，设置全局属性<code>cacheEnabled</code>为<code>true</code>（默认为true，无需设置）。<li>映射文件中设置标签<code>&LTcache/></code>。<li>二级缓存必须在SqlSession关闭或提交后有效。<li>查询结果转换的实体类必须实现序列化接口。</ol><p><font color=red>注意：要实现二级缓存效果，需要执行完查询操作后关闭SqlSession，因为关闭操作会触发缓存保存。</font><h3 id=3-3-3、缓存失效><a class=headerlink href=#3-3-3、缓存失效 title=3.3.3、缓存失效></a>3.3.3、缓存失效</h3><p>二级缓存失效的情况：两次查询期间执行了任意的增删改操作。<blockquote><p><font color=red>注意事项：在执行完 增删改 操作后，会对一级缓存和二级缓存进行清理。</font></blockquote><h3 id=3-3-4、配置参数><a class=headerlink href=#3-3-4、配置参数 title=3.3.4、配置参数></a>3.3.4、配置参数</h3><p>二级缓存相关配置参数如下：<ul><li><p><strong>eviction属性</strong>：缓存回收策略。</p> <ul><li>LRU（默认）：最近最少使用，默认配置。<li>FIFO：先进先出。<li>SOFT：软引用。<li>WEAK：弱引用。</ul><li><p><strong>flushInterval属性</strong>：刷新间隔，单位毫秒。默认没有配置该参数，缓存仅在调用语句时刷新。</p><li><p><strong>size属性</strong>：引用数量，正整数。表示缓存最多可以存储对象的数量，太大会导致内存溢出。</p><li><p><strong>readOnly属性</strong>：只读，可选值有true/false，默认值为false。值为true表示只读缓存。值为false表示读写缓存。</p></ul><h2 id=3-4、EhCache缓存><a class=headerlink href=#3-4、EhCache缓存 title=3.4、EhCache缓存></a>3.4、EhCache缓存</h2><h3 id=3-4-1、简介><a class=headerlink href=#3-4-1、简介 title=3.4.1、简介></a>3.4.1、简介</h3><p><strong>Ehcache由Greg Luck于2003年开发</strong>。2009年该项目被Terracotta收购，该公司提供有偿支持。<p>Ehcache是一个开源的Java分布式缓存，用于通用缓存、Java EE和轻量级容器。Ehcache在Apache开源许可下可用。<h3 id=3-4-2、使用步骤><a class=headerlink href=#3-4-2、使用步骤 title=3.4.2、使用步骤></a>3.4.2、使用步骤</h3><p><strong>（1）添加依赖</strong><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.mybatis.caches<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>mybatis-ehcache<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>1.2.2<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>dependency</span>></span></span><br></pre></table></figure><p><strong>（2）添加ehcache.xml文件</strong><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT?xml version=<span class=string>"1.0"</span> encoding=<span class=string>"UTF-8"</span>?></span></span><br><span class=line><span class=tag><<span class=name>ehcache</span> <span class=attr>xmlns:xsi</span>=<span class=string>"http://www.w3.org/2001/XMLSchema-instance"</span> <span class=attr>xsi:noNamespaceSchemaLocation</span>=<span class=string>"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class=line><span class=tag>                    <span class=attr>updateCheck</span>=<span class=string>"false"</span>></span></span><br><span class=line></span><br><span class=line>    <span class=tag><<span class=name>diskStore</span> <span class=attr>path</span>=<span class=string>"D:\tmp\ssm"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>defaultCache</span></span></span><br><span class=line><span class=tag>        <span class=attr>eternal</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>maxElementsInMemory</span>=<span class=string>"10000"</span></span></span><br><span class=line><span class=tag>        <span class=attr>overflowToDisk</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>diskPersistent</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>timeToIdleSeconds</span>=<span class=string>"1800"</span></span></span><br><span class=line><span class=tag>        <span class=attr>timeToLiveSeconds</span>=<span class=string>"259200"</span></span></span><br><span class=line><span class=tag>        <span class=attr>memoryStoreEvictionPolicy</span>=<span class=string>"LRU"</span>/></span></span><br><span class=line>    <span class=tag><<span class=name>cache</span></span></span><br><span class=line><span class=tag>        <span class=attr>name</span>=<span class=string>"test_mybatis2l"</span></span></span><br><span class=line><span class=tag>        <span class=attr>eternal</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>maxElementsInMemory</span>=<span class=string>"5000"</span></span></span><br><span class=line><span class=tag>        <span class=attr>overflowToDisk</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>diskPersistent</span>=<span class=string>"false"</span></span></span><br><span class=line><span class=tag>        <span class=attr>timeToIdleSeconds</span>=<span class=string>"1800"</span></span></span><br><span class=line><span class=tag>        <span class=attr>timeToLiveSeconds</span>=<span class=string>"1800"</span></span></span><br><span class=line><span class=tag>        <span class=attr>memoryStoreEvictionPolicy</span>=<span class=string>"LRU"</span>/></span></span><br><span class=line><span class=tag>&LT/<span class=name>ehcache</span>></span></span><br></pre></table></figure><p><strong>（3）配置缓存标签，开启缓存</strong><p>在mapper映射文件中<strong>添加cache标签</strong>，设置type属性为EhcacheCache。<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>cache</span> <span class=attr>type</span>=<span class=string>"org.mybatis.caches.ehcache.EhcacheCache"</span>/></span></span><br></pre></table></figure><h1 id=4、插件><a class=headerlink href=#4、插件 title=4、插件></a>4、插件</h1><h2 id=4-1、底层原理><a class=headerlink href=#4-1、底层原理 title=4.1、底层原理></a>4.1、底层原理</h2><p><strong>Mybatis 仅可以编写针对 ParameterHandler、ResultSetHandler、StatementHandler、Executor 等4种接口类型的插件</strong>。Mybatis <strong>使用JDK 动态代理来实现接口方法拦截增强</strong>。每当执行这 4 种接口对象方法时，就会进入拦截方法（ InvocationHandler 的 invoke()方法）。<h2 id=4-2、自定义插件><a class=headerlink href=#4-2、自定义插件 title=4.2、自定义插件></a>4.2、自定义插件</h2><p>实现 Mybatis 的 Interceptor 接口并重写 intercept()方法，给插件编写注解，指定要拦截哪一个接口的哪些方法。<p><font color=red>注意：插件开发完毕后，要在配置文件中进行配置才会生效。</font><h2 id=4-3、分页插件><a class=headerlink href=#4-3、分页插件 title=4.3、分页插件></a>4.3、分页插件</h2><p>1）引入依赖<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!--mybatis分页插件--></span></span><br><span class=line><span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>com.github.pagehelper<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>pagehelper<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>5.2.0<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>dependency</span>></span></span><br></pre></table></figure><p>2）配置分页插件<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!--分页插件--></span></span><br><span class=line><span class=tag><<span class=name>plugin</span> <span class=attr>interceptor</span>=<span class=string>"com.github.pagehelper.PageInterceptor"</span>></span><span class=tag>&LT/<span class=name>plugin</span>></span></span><br></pre></table></figure><p>3）使用示例<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testGetUserPage</span><span class=params>()</span>{</span><br><span class=line>    <span class=keyword>try</span>(<span class=type>SqlSession</span> <span class=variable>sqlSession</span> <span class=operator>=</span> MyBatisUtil.getSqlSession()) {</span><br><span class=line>        <span class=type>UserMapper</span> <span class=variable>userMapper</span> <span class=operator>=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class=line>        <span class=comment>// 开启分页</span></span><br><span class=line>        Page&LTObject> page = PageHelper.startPage(<span class=number>2</span>, <span class=number>3</span>);</span><br><span class=line>        List&LTUser> userList = userMapper.getAll();</span><br><span class=line>        PageInfo&LTUser> userPageInfo = <span class=keyword>new</span> <span class="title class_">PageInfo</span><>(userList);</span><br><span class=line>        userList.forEach(System.out::println);</span><br><span class=line>        System.out.println(<span class=string>"page: "</span> + page);</span><br><span class=line>        System.out.println(<span class=string>"pageInfo: "</span> + userPageInfo);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=总结><a class=headerlink href=#总结 title=总结></a>总结</h1><h2 id=实体类对比><a class=headerlink href=#实体类对比 title=实体类对比></a>实体类对比</h2><h3 id=POJO><a class=headerlink href=#POJO title=POJO></a>POJO</h3><p>按照Martin Fowler的解释，<strong>POJO指的是“Plain Old Java Object”的首字母，字面翻译为纯洁老式Java对象，一般称为简单Java对象</strong>。<p>POJO是指那些 <strong>没有继承任何类、没有实现任何接口，没有业务方法，更没有被其它框架侵入的Java对象</strong>。<h3 id=Java-Bean><a title="Java Bean" class=headerlink href=#Java-Bean></a>Java Bean</h3><p>JavaBean是JAVA实现的<em><strong>可重用组件</strong></em>。必须符合如下约定：<ol><li>这个类<strong>必须有一个公共缺省构造函数</strong>。<li>这个<strong>类的属性使用getter和setter来访问</strong>，其他方法遵从标准命名规范。<li>这个<strong>类可以被序列化</strong>。</ol><blockquote><p>注意：<ol><li><em><strong>缺省构造函数 又叫 默认构造函数</strong></em>，也就是声明对象时会被编译器调用的一个构造函数。<li>若类中没有编写构造函数，编译器会自动添加一个缺省构造函数，该函数相当于一个不接受任何参数，不进行任何操作的构造函数。而当类中已经有编写的构造函数时，编译器就不会再自动生成。</ol></blockquote><blockquote><p>PoJo VS JavaBean：<ul><li>pojo用于数据的临时传递，它仅用于装数据，而不具有业务逻辑处理能力。<li>JavaBean的数据获取与pojo一样，但Java Bean中可以编写其它方法逻辑。</ul></blockquote><h3 id=Entity><a class=headerlink href=#Entity title=Entity></a>Entity</h3><p><strong>实体bean一般用于ORM对象关系映射，一个实体映射一张表，一般无业务逻辑代码</strong>。<blockquote><p>操作EntityBean就等于操作了数据库，是面向对象编程的一种体现。</blockquote><p><strong>Entity使用场景</strong>：广泛应用于领域驱动设计，用于表示业务模型与数据库表的映射。<h3 id=DTO><a class=headerlink href=#DTO title=DTO></a>DTO</h3><p><strong>DTO是数据传输对象（Data Transfer Object）的简称，用于在不同层或服务之间传输数据，用于解耦不同层之间的数据传输。</strong><p>DTO特点如下：<ul><li>轻量级的数据对象，<strong>仅包含所需的数据字段，不包含业务逻辑或复杂的方法</strong>。<li>可以在不同的系统或服务之间进行序列化和传输。<li>可以通过映射与实体对象进行相互转换。</ul><p>DTO的使用场景：通常在分层架构或微服务架构中使用，用于在不同的层或服务之间传输数据。可以减少层之间的耦合度。</div><footer class=post-footer><div class=post-tags><a href=/tags/MyBatis/ rel=tag># MyBatis</a><a href=/tags/MyBatis%E5%9F%BA%E7%A1%80/ rel=tag># MyBatis基础</a></div><div class=post-nav><div class=post-nav-item><a href=/2024/08/21/MyBatis%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ rel=prev title=MyBatis系列-MyBatis原理解析> <i class="fa fa-angle-left"></i> MyBatis系列-MyBatis原理解析 </a></div><div class=post-nav-item><a href=/2024/08/21/MyBatis%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A82/ rel=next title=MyBatis系列-MyBatis基础应用（二）> MyBatis系列-MyBatis基础应用（二） <i class="fa fa-angle-right"></i> </a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© <span itemprop=copyrightYear>2024</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>豪哥</span></div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/sidebar.js></script><script src=/js/next-boot.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=/js/third-party/search/local-search.js></script>