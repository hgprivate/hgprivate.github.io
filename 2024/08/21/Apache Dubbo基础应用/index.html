<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta media="(prefers-color-scheme: light)" content=#222 name=theme-color><meta media="(prefers-color-scheme: dark)" content=#222 name=theme-color><meta content="Hexo 7.3.0" name=generator><link href=/images/apple-touch-icon-next.png rel=apple-touch-icon sizes=180x180><link href=/images/favicon-32x32-next.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16-next.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><link href=/css/main.css rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity=sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"hshz21.gitee.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta content="1、软件架构演进软件架构的发展经历了由单体架构、垂直架构、SOA架构到微服务架构的演进过程，下面我们分别了解一下这几个架构。 1.1、单体架构 1.1.1、架构说明全部功能集中在一个项目内（All in one）。 1.1.2、架构优劣优点 架构简单，前期开发成本低、开发周期短，适合小型项目。 缺点  全部功能集成在一个工程中，对于大型项目不易开发、扩展和维护。 技术栈受限，只能使用一种语言开发。" name=description><meta content=article property=og:type><meta content=Dubbo系列-Dubbo基础应用 property=og:title><meta content=https://hshz21.gitee.io/2024/08/21/Apache%20Dubbo%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/index.html property=og:url><meta content=豪哥博客 property=og:site_name><meta content="1、软件架构演进软件架构的发展经历了由单体架构、垂直架构、SOA架构到微服务架构的演进过程，下面我们分别了解一下这几个架构。 1.1、单体架构 1.1.1、架构说明全部功能集中在一个项目内（All in one）。 1.1.2、架构优劣优点 架构简单，前期开发成本低、开发周期短，适合小型项目。 缺点  全部功能集成在一个工程中，对于大型项目不易开发、扩展和维护。 技术栈受限，只能使用一种语言开发。" property=og:description><meta content=zh_CN property=og:locale><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20210523002635007.png property=og:image><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20230807163107976.png property=og:image><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023%2F08%2F07%2Fimage-20210523003707628.png property=og:image><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20210523002853420.png property=og:image><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20230807164309565.png property=og:image><meta content=2024-08-21T13:39:13.311Z property=article:published_time><meta content=2023-10-02T07:13:46.367Z property=article:modified_time><meta content=豪哥 property=article:author><meta content=Dubbo property=article:tag><meta content=Dubbo基础 property=article:tag><meta content=summary name=twitter:card><meta content=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20210523002635007.png name=twitter:image><link href=https://hshz21.gitee.io/2024/08/21/Apache%20Dubbo%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hshz21.gitee.io/2024/08/21/Apache%20Dubbo%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/","path":"2024/08/21/Apache Dubbo基础应用/","title":"Dubbo系列-Dubbo基础应用"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Dubbo系列-Dubbo基础应用 | 豪哥博客</title><noscript><link href=/css/noscript.css rel=stylesheet></noscript><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>豪哥博客</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>豪哥博客</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#1%E3%80%81%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B><span class=nav-number>1.</span> <span class=nav-text>1、软件架构演进</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#1-1%E3%80%81%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84><span class=nav-number>1.1.</span> <span class=nav-text>1.1、单体架构</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-1%E3%80%81%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E><span class=nav-number>1.1.1.</span> <span class=nav-text>1.1.1、架构说明</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-2%E3%80%81%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8A%A3><span class=nav-number>1.1.2.</span> <span class=nav-text>1.1.2、架构优劣</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-2%E3%80%81%E5%9E%82%E7%9B%B4%E6%9E%B6%E6%9E%84><span class=nav-number>1.2.</span> <span class=nav-text>1.2、垂直架构</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-1%E3%80%81%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E><span class=nav-number>1.2.1.</span> <span class=nav-text>1.2.1、架构说明</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-2%E3%80%81%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8A%A3><span class=nav-number>1.2.2.</span> <span class=nav-text>1.2.2、架构优劣</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-3%E3%80%81SOA%E6%9E%B6%E6%9E%84><span class=nav-number>1.3.</span> <span class=nav-text>1.3、SOA架构</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-1%E3%80%81%E7%AE%80%E4%BB%8B><span class=nav-number>1.3.1.</span> <span class=nav-text>1.3.1、简介</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-2%E3%80%81%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E><span class=nav-number>1.3.2.</span> <span class=nav-text>1.3.2、架构说明</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-3%E3%80%81%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8A%A3><span class=nav-number>1.3.3.</span> <span class=nav-text>1.3.3、架构优劣</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-4%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84><span class=nav-number>1.4.</span> <span class=nav-text>1.4、微服务架构</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-4-1%E3%80%81%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E><span class=nav-number>1.4.1.</span> <span class=nav-text>1.4.1、架构说明</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-4-2%E3%80%81%E6%9E%B6%E6%9E%84%E4%BC%98%E5%8A%A3><span class=nav-number>1.4.2.</span> <span class=nav-text>1.4.2、架构优劣</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#2%E3%80%81Apache-Dubbo%E6%A6%82%E8%BF%B0><span class=nav-number>2.</span> <span class=nav-text>2、Apache Dubbo概述</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#2-1%E3%80%81Dubbo%E7%AE%80%E4%BB%8B><span class=nav-number>2.1.</span> <span class=nav-text>2.1、Dubbo简介</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#2-2%E3%80%81Dubbo%E6%9E%B6%E6%9E%84><span class=nav-number>2.2.</span> <span class=nav-text>2.2、Dubbo架构</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#3%E3%80%81%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83Zookeeper><span class=nav-number>3.</span> <span class=nav-text>3、服务注册中心Zookeeper</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#3-1%E3%80%81Zookeeper%E4%BB%8B%E7%BB%8D><span class=nav-number>3.1.</span> <span class=nav-text>3.1、Zookeeper介绍</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#3-2%E3%80%81%E5%AE%89%E8%A3%85Zookeeper><span class=nav-number>3.2.</span> <span class=nav-text>3.2、安装Zookeeper</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#3-3%E3%80%81%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C><span class=nav-number>3.3.</span> <span class=nav-text>3.3、常用操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-1%E3%80%81%E5%90%AF%E5%8A%A8><span class=nav-number>3.3.1.</span> <span class=nav-text>3.3.1、启动</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-2%E3%80%81%E5%81%9C%E6%AD%A2><span class=nav-number>3.3.2.</span> <span class=nav-text>3.3.2、停止</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-3%E3%80%81%E6%9F%A5%E7%9C%8B%E7%8A%B6%E6%80%81><span class=nav-number>3.3.3.</span> <span class=nav-text>3.3.3、查看状态</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#4%E3%80%81Dubbo%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8><span class=nav-number>4.</span> <span class=nav-text>4、Dubbo快速入门</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#4-1%E3%80%81%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%E5%BC%80%E5%8F%91><span class=nav-number>4.1.</span> <span class=nav-text>4.1、服务提供方开发</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#4-2%E3%80%81%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9%E5%BC%80%E5%8F%91><span class=nav-number>4.2.</span> <span class=nav-text>4.2、服务消费方开发</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#5%E3%80%81Dubbo%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E5%8F%B0><span class=nav-number>5.</span> <span class=nav-text>5、Dubbo管理控制台</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#5-1%E3%80%81%E5%AE%89%E8%A3%85><span class=nav-number>5.1.</span> <span class=nav-text>5.1、安装</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#5-2%E3%80%81%E4%BD%BF%E7%94%A8><span class=nav-number>5.2.</span> <span class=nav-text>5.2、使用</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#6%E3%80%81Dubbo%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE><span class=nav-number>6.</span> <span class=nav-text>6、Dubbo相关配置</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#6-1%E3%80%81%E5%8C%85%E6%89%AB%E6%8F%8F><span class=nav-number>6.1.</span> <span class=nav-text>6.1、包扫描</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#6-2%E3%80%81%E5%8D%8F%E8%AE%AE><span class=nav-number>6.2.</span> <span class=nav-text>6.2、协议</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#6-3%E3%80%81%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%9F%A5><span class=nav-number>6.3.</span> <span class=nav-text>6.3、启动时检查</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#6-4%E3%80%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1><span class=nav-number>6.4.</span> <span class=nav-text>6.4、负载均衡</span></a></ol></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt=豪哥 class=site-author-image itemprop=image src=/static/imgs/avatar.png><p class=site-author-name itemprop=name>豪哥<div class=site-description itemprop=description>豪哥博客</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>116</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>36</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>129</span> <span class=site-state-item-name>标签</span></a></div></nav></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://hshz21.gitee.io/2024/08/21/Apache%20Dubbo%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=/static/imgs/avatar.png itemprop=image> <meta content=豪哥 itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=豪哥博客 itemprop=name> <meta content=豪哥博客 itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="Dubbo系列-Dubbo基础应用 | 豪哥博客" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>Dubbo系列-Dubbo基础应用</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2024-08-21 21:39:13" datetime=2024-08-21T21:39:13+08:00>2024-08-21</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-10-02 15:13:46" datetime=2023-10-02T15:13:46+08:00 itemprop=dateModified>2023-10-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Dubbo/ itemprop=url rel=index><span itemprop=name>Dubbo</span></a> </span> </span></div></div></header><div class=post-body itemprop=articleBody><h1 id=1、软件架构演进><a class=headerlink href=#1、软件架构演进 title=1、软件架构演进></a>1、软件架构演进</h1><p>软件架构的发展经历了由单体架构、垂直架构、SOA架构到微服务架构的演进过程，下面我们分别了解一下这几个架构。<h2 id=1-1、单体架构><a class=headerlink href=#1-1、单体架构 title=1.1、单体架构></a>1.1、单体架构</h2><p><img alt=image-20210523002635007 src=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20210523002635007.png><h3 id=1-1-1、架构说明><a class=headerlink href=#1-1-1、架构说明 title=1.1.1、架构说明></a>1.1.1、架构说明</h3><p>全部功能集中在一个项目内（All in one）。<h3 id=1-1-2、架构优劣><a class=headerlink href=#1-1-2、架构优劣 title=1.1.2、架构优劣></a>1.1.2、架构优劣</h3><p><strong>优点</strong><p>架构简单，前期开发成本低、开发周期短，适合小型项目。<p><strong>缺点</strong><ol><li>全部功能集成在一个工程中，对于大型项目不易开发、扩展和维护。<li>技术栈受限，只能使用一种语言开发。<li>系统性能扩展只能通过扩展集群节点，成本高。</ol><h2 id=1-2、垂直架构><a class=headerlink href=#1-2、垂直架构 title=1.2、垂直架构></a>1.2、垂直架构</h2><p><img alt=image-20230807163107976 src=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20230807163107976.png><h3 id=1-2-1、架构说明><a class=headerlink href=#1-2-1、架构说明 title=1.2.1、架构说明></a>1.2.1、架构说明</h3><p>按照业务进行切割，形成小型单体项目。<h3 id=1-2-2、架构优劣><a class=headerlink href=#1-2-2、架构优劣 title=1.2.2、架构优劣></a>1.2.2、架构优劣</h3><p><strong>优点</strong><p>技术栈可扩展（不同的系统可以用不同的编程语言编写）。<p><strong>缺点</strong><ol><li>功能集中在一个项目中，不利于开发、扩展、维护。<li>系统扩张只能通过集群的方式。<li>项目之间功能冗余、数据冗余、耦合性强。</ol><h2 id=1-3、SOA架构><a class=headerlink href=#1-3、SOA架构 title=1.3、SOA架构></a>1.3、SOA架构</h2><img alt=image-20210523003707628 src=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023%2F08%2F07%2Fimage-20210523003707628.png style=zoom:150%;><h3 id=1-3-1、简介><a class=headerlink href=#1-3-1、简介 title=1.3.1、简介></a>1.3.1、简介</h3><p><strong>SOA 全称是 Service-Oriented Architecture，意为面向服务的架构。它可以 根据需求通过网络对松散耦合的粗粒度应用组件进行分布式部署、组合和使用。一个服务通常以独立的形式存在于操作系统进程中。</strong><p>站在功能角度，把业务逻辑抽象成可复用的服务，通过 服务编排 实现 业务快速再生，目的：把原先固有的业务功能转变为通用的业务服务，实现业务逻辑的快速复用。<h3 id=1-3-2、架构说明><a class=headerlink href=#1-3-2、架构说明 title=1.3.2、架构说明></a>1.3.2、架构说明</h3><p>将 重复功能 或 模块 抽取成 组件 形式，对外提供服务，项目与服务间 使用ESB（企业服务总线）形式作为 通信桥梁。<h3 id=1-3-3、架构优劣><a class=headerlink href=#1-3-3、架构优劣 title=1.3.3、架构优劣></a>1.3.3、架构优劣</h3><p><strong>优点</strong><ol><li>重复功能或模块抽取为服务，提高开发效率。<li>可重用性高。<li>可维护性高。</ol><p><strong>缺点</strong><ol><li>各系统之间业务不同，很难确认功能或模块是重复的。<li>抽取服务的粒度大。<li>系统和服务之间耦合度高。</ol><h2 id=1-4、微服务架构><a class=headerlink href=#1-4、微服务架构 title=1.4、微服务架构></a>1.4、微服务架构</h2><p><img alt=image-20210523002853420 src=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20210523002853420.png><h3 id=1-4-1、架构说明><a class=headerlink href=#1-4-1、架构说明 title=1.4.1、架构说明></a>1.4.1、架构说明</h3><p>将系统服务层完全独立出来，抽取为一个一个的微服务。抽取的粒度更细，遵循单一原则。采用轻量级框架协议传输。<h3 id=1-4-2、架构优劣><a class=headerlink href=#1-4-2、架构优劣 title=1.4.2、架构优劣></a>1.4.2、架构优劣</h3><p><strong>优点</strong><ol><li>服务拆分粒度更细，有利于提高开发效率。<li>可以针对不同服务制定对应的优化方案。<li>适用于互联网时代，产品迭代周期更短。</ol><p><strong>缺点</strong><ol><li>粒度太细导致服务太多，维护成本高。<li>分布式系统开发的技术成本高，对团队的挑战大。</ol><h1 id=2、Apache-Dubbo概述><a title="2、Apache Dubbo概述" class=headerlink href=#2、Apache-Dubbo概述></a>2、Apache Dubbo概述</h1><h2 id=2-1、Dubbo简介><a class=headerlink href=#2-1、Dubbo简介 title=2.1、Dubbo简介></a>2.1、Dubbo简介</h2><p>Apache Dubbo是一款高性能的<em><strong>Java RPC框架</strong></em>。其前身是阿里巴巴公司开源的一个高性能、轻量级的开源Java RPC框架，可以和Spring框架无缝集成。<p>RPC全称为 <code>remote procedure call</code>，即<em><strong>远程过程调用</strong></em>。比如两台服务器A和B，A服务器上部署一个应用，B服务器上部署一个应用，A服务器上的应用想调用B服务器上的应用提供的方法，由于两个应用不在一个内存空间，不能直接调用，所以需要通过网络来表达调用的语义和传达调用数据。<blockquote><p>注意：RPC并不是一个具体的技术，而是指整个网络远程调用过程。</blockquote><p>RPC是一个泛化概念，严格来说一切远程过程调用手段都属于RPC范畴。各种开发语言都有自己的RPC框架。Java中的RPC框架比较多，广泛使用的有RMI、Hessian、Dubbo等。<blockquote><p>Dubbo官网地址：<a href=http://dubbo.apache.org/ rel=noopener target=_blank>http://dubbo.apache.org</a></blockquote><p>Dubbo三大核心能力：<strong>面向接口的远程方法调用、智能容错和负载均衡、服务自动注册和发现。</strong><h2 id=2-2、Dubbo架构><a class=headerlink href=#2-2、Dubbo架构 title=2.2、Dubbo架构></a>2.2、Dubbo架构</h2><p>Dubbo架构图：<p><img alt=image-20230807164309565 src=https://raw.githubusercontent.com/lucky2shh/blog-haogeblogs-image/master/2023/08/07/image-20230807164309565.png><p>节点角色说明：<table><thead><tr><th>节点<th>角色名称<tbody><tr><td>Provider<td>服务提供方<tr><td>Consumer<td>服务消费方<tr><td>Registry<td>注册中心<tr><td>Monitor<td>监控中心（统计服务调用次数和调用时间）<tr><td>Container<td>服务运行容器</table><blockquote><p>1、虚线表示异步访问，实线表示同步访问。<br>2、蓝色虚线表示在启动时完成的功能。<br>3、红色虚线(实线)都表示程序运行过程中执行的功能。</blockquote><p>调用关系说明：<ol start=0><li>服务容器负责启动，加载，运行服务提供者。<li>服务提供者在启动时，向注册中心注册自己为服务。<li>服务消费者在启动时，从注册中心订阅自己所需服务。<li>注册中心 返回服务提供者地址列表 给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。<li>服务消费者 从 服务提供者地址列表中 基于软负载均衡算法 挑选一个服务提供者来调用，如果调用失败，就尝试其它服务提供者。<li>服务消费者和提供者在内存中的 累计 <strong>调用次数 和 调用时间 等统计数据会被定时每分钟发送一次到监控中心</strong>。</ol><h1 id=3、服务注册中心Zookeeper><a class=headerlink href=#3、服务注册中心Zookeeper title=3、服务注册中心Zookeeper></a>3、服务注册中心Zookeeper</h1><p>Dubbo官方推荐使用Zookeeper作为服务注册中心。<h2 id=3-1、Zookeeper介绍><a class=headerlink href=#3-1、Zookeeper介绍 title=3.1、Zookeeper介绍></a>3.1、Zookeeper介绍</h2><p>Zookeeper 是 Apache Hadoop 的子项目，是一个树型目录服务，支持变更推送，适合作为 Dubbo 服务的注册中心。<p>流程说明：<ul><li>服务提供者(Provider)启动时：向 <code>/dubbo/com.foo.BarService/providers</code> 目录下写入自己的 URL 地址。<li>服务消费者(Consumer)启动时：订阅 <code>/dubbo/com.foo.BarService/providers</code> 目录下的提供者 URL 地址。并向 <code>/dubbo/com.foo.BarService/consumers</code> 目录下写入自己的 URL 地址。<li>监控中心（Monitor）启动时：订阅 <code>/dubbo/com.foo.BarService</code> 目录下的所有提供者和消费者 URL 地址。</ul><h2 id=3-2、安装Zookeeper><a class=headerlink href=#3-2、安装Zookeeper title=3.2、安装Zookeeper></a>3.2、安装Zookeeper</h2><p>下载地址：<a href=http://archive.apache.org/dist/zookeeper/ rel=noopener target=_blank>http://archive.apache.org/dist/zookeeper/</a><p>安装步骤：<ol><li><p>第一步：安装 jdk（略）。</p><li><p>第二步：把 zookeeper 的压缩包（zookeeper-3.4.6.tar.gz）上传到 linux 系统。</p><li><p>第三步：解压缩压缩包。</p> <figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>tar -zxvf zookeeper-3.4.6.tar.gz</span><br></pre></table></figure><li><p>第四步：进入zookeeper-3.4.6目录，创建data目录。</p> <figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=built_in>mkdir</span> data</span><br></pre></table></figure><li><p>第五步：进入conf目录 ，把zoo_sample.cfg 改名为zoo.cfg。</p> <figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=built_in>cd</span> conf</span><br><span class=line><span class=built_in>mv</span> zoo_sample.cfg zoo.cfg</span><br></pre></table></figure><li><p>第六步：打开zoo.cfg文件, 修改data属性：dataDir=/root/zookeeper-3.4.6/data。</p></ol><h2 id=3-3、常用操作><a class=headerlink href=#3-3、常用操作 title=3.3、常用操作></a>3.3、常用操作</h2><h3 id=3-3-1、启动><a class=headerlink href=#3-3-1、启动 title=3.3.1、启动></a>3.3.1、启动</h3><p>进入Zookeeper的bin目录，启动服务命令：<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>./zkServer.sh start</span><br></pre></table></figure><h3 id=3-3-2、停止><a class=headerlink href=#3-3-2、停止 title=3.3.2、停止></a>3.3.2、停止</h3><p>停止服务命令：<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>./zkServer.sh stop</span><br></pre></table></figure><h3 id=3-3-3、查看状态><a class=headerlink href=#3-3-3、查看状态 title=3.3.3、查看状态></a>3.3.3、查看状态</h3><p>查看服务状态：<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>./zkServer.sh status</span><br></pre></table></figure><h1 id=4、Dubbo快速入门><a class=headerlink href=#4、Dubbo快速入门 title=4、Dubbo快速入门></a>4、Dubbo快速入门</h1><p>Dubbo最核心的功能就是实现跨网络远程调用。通过Dubbo来实现服务消费方远程调用服务提供方的方法。<h2 id=4-1、服务提供方开发><a class=headerlink href=#4-1、服务提供方开发 title=4.1、服务提供方开发></a>4.1、服务提供方开发</h2><p>开发步骤：<p>1、创建maven工程（打包方式为war）dubbodemo_provider，在pom.xml文件中导入如下坐标<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>properties</span>></span></span><br><span class=line>  <span class=tag><<span class=name>project.build.sourceEncoding</span>></span>UTF-8<span class=tag>&LT/<span class=name>project.build.sourceEncoding</span>></span></span><br><span class=line>  <span class=tag><<span class=name>maven.compiler.source</span>></span>1.8<span class=tag>&LT/<span class=name>maven.compiler.source</span>></span></span><br><span class=line>  <span class=tag><<span class=name>maven.compiler.target</span>></span>1.8<span class=tag>&LT/<span class=name>maven.compiler.target</span>></span></span><br><span class=line>  <span class=tag><<span class=name>spring.version</span>></span>5.0.5.RELEASE<span class=tag>&LT/<span class=name>spring.version</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>properties</span>></span></span><br><span class=line><span class=tag><<span class=name>dependencies</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-context<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-beans<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-webmvc<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-jdbc<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-aspects<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-jms<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.springframework<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>spring-context-support<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>${spring.version}<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=comment>&LT!-- dubbo相关 --></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>com.alibaba<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>dubbo<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>2.6.0<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>org.apache.zookeeper<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>zookeeper<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>3.4.7<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>com.github.sgroschupf<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>zkclient<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>0.1<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>javassist<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>javassist<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>3.12.1.GA<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line>  <span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>com.alibaba<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>fastjson<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>1.2.47<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>dependency</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>dependencies</span>></span></span><br><span class=line><span class=tag><<span class=name>build</span>></span></span><br><span class=line>  <span class=tag><<span class=name>plugins</span>></span></span><br><span class=line>    <span class=tag><<span class=name>plugin</span>></span></span><br><span class=line>      <span class=tag><<span class=name>groupId</span>></span>org.apache.maven.plugins<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>      <span class=tag><<span class=name>artifactId</span>></span>maven-compiler-plugin<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>      <span class=tag><<span class=name>version</span>></span>2.3.2<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line>      <span class=tag><<span class=name>configuration</span>></span></span><br><span class=line>        <span class=tag><<span class=name>source</span>></span>1.8<span class=tag>&LT/<span class=name>source</span>></span></span><br><span class=line>        <span class=tag><<span class=name>target</span>></span>1.8<span class=tag>&LT/<span class=name>target</span>></span></span><br><span class=line>      <span class=tag>&LT/<span class=name>configuration</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>plugin</span>></span></span><br><span class=line>    <span class=tag><<span class=name>plugin</span>></span></span><br><span class=line>      <span class=tag><<span class=name>groupId</span>></span>org.apache.tomcat.maven<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>      <span class=tag><<span class=name>artifactId</span>></span>tomcat7-maven-plugin<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>      <span class=tag><<span class=name>configuration</span>></span></span><br><span class=line>        <span class=comment>&LT!-- 指定端口 --></span></span><br><span class=line>        <span class=tag><<span class=name>port</span>></span>8081<span class=tag>&LT/<span class=name>port</span>></span></span><br><span class=line>        <span class=comment>&LT!-- 请求路径 --></span></span><br><span class=line>        <span class=tag><<span class=name>path</span>></span>/<span class=tag>&LT/<span class=name>path</span>></span></span><br><span class=line>      <span class=tag>&LT/<span class=name>configuration</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>plugin</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>plugins</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>build</span>></span></span><br></pre></table></figure><p>（2）配置web.xml文件<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT!DOCTYPE <span class=keyword>web-app</span> <span class=keyword>PUBLIC</span></span></span><br><span class=line><span class=meta> <span class=string>"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class=line><span class=meta> <span class=string>"http://java.sun.com/dtd/web-app_2_3.dtd"</span> ></span></span><br><span class=line><span class=tag><<span class=name>web-app</span>></span></span><br><span class=line>  <span class=tag><<span class=name>display-name</span>></span>Archetype Created Web Application<span class=tag>&LT/<span class=name>display-name</span>></span></span><br><span class=line>  <span class=tag><<span class=name>context-param</span>></span></span><br><span class=line>    <span class=tag><<span class=name>param-name</span>></span>contextConfigLocation<span class=tag>&LT/<span class=name>param-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>param-value</span>></span>classpath:applicationContext*.xml<span class=tag>&LT/<span class=name>param-value</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>context-param</span>></span></span><br><span class=line>  <span class=tag><<span class=name>listener</span>></span></span><br><span class=line>    <span class=tag><<span class=name>listener-class</span>></span>org.springframework.web.context.ContextLoaderListener<span class=tag>&LT/<span class=name>listener-class</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>listener</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>web-app</span>></span></span><br><span class=line></span><br></pre></table></figure><p>（3）创建服务接口<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> com.itheima.service;</span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">HelloService</span> {</span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">sayHello</span><span class=params>(String name)</span>;</span><br><span class=line>}</span><br></pre></table></figure><p>（4）创建服务实现类<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> com.itheima.service.impl;</span><br><span class=line><span class=keyword>import</span> com.alibaba.dubbo.config.annotation.Service;</span><br><span class=line><span class=keyword>import</span> com.itheima.service.HelloService;</span><br><span class=line></span><br><span class=line><span class=meta>@Service</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloServiceImpl</span> <span class=keyword>implements</span> <span class="title class_">HelloService</span> {</span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">sayHello</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"hello "</span> + name;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><p>注意：服务实现类上使用的Service注解由 Dubbo提供，其作用是对外发布服务。<p>5、在<code>src/main/resources</code>下创建<code>applicationContext-service.xml</code><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT?xml version=<span class=string>"1.0"</span> encoding=<span class=string>"UTF-8"</span>?></span></span><br><span class=line><span class=tag><<span class=name>beans</span> <span class=attr>xmlns</span>=<span class=string>"http://www.springframework.org/schema/beans"</span></span></span><br><span class=line><span class=tag>		<span class=attr>xmlns:xsi</span>=<span class=string>"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class=line><span class=tag>	    <span class=attr>xmlns:p</span>=<span class=string>"http://www.springframework.org/schema/p"</span></span></span><br><span class=line><span class=tag>		<span class=attr>xmlns:context</span>=<span class=string>"http://www.springframework.org/schema/context"</span></span></span><br><span class=line><span class=tag>		<span class=attr>xmlns:dubbo</span>=<span class=string>"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class=line><span class=tag>	    <span class=attr>xmlns:mvc</span>=<span class=string>"http://www.springframework.org/schema/mvc"</span></span></span><br><span class=line><span class=tag>		<span class=attr>xsi:schemaLocation</span>=<span class=string>"http://www.springframework.org/schema/beans</span></span></span><br><span class=line><span class=string><span class=tag>		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=line><span class=string><span class=tag>         http://www.springframework.org/schema/mvc</span></span></span><br><span class=line><span class=string><span class=tag>         http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class=line><span class=string><span class=tag>         http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class=line><span class=string><span class=tag>         http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span></span><br><span class=line><span class=string><span class=tag>         http://www.springframework.org/schema/context</span></span></span><br><span class=line><span class=string><span class=tag>         http://www.springframework.org/schema/context/spring-context.xsd"</span>></span></span><br><span class=line>	<span class=comment>&LT!-- 当前应用名称，用于注册中心计算应用间依赖关系，注意：消费者和提供者应用名不要一样 --></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:application</span> <span class=attr>name</span>=<span class=string>"dubbodemo_provider"</span> /></span></span><br><span class=line>	<span class=comment>&LT!-- 连接服务注册中心zookeeper ip为zookeeper所在服务器的ip地址--></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:registry</span> <span class=attr>address</span>=<span class=string>"zookeeper://192.168.134.129:2181"</span>/></span></span><br><span class=line>	<span class=comment>&LT!-- 注册  协议和port   端口默认是20880 --></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:protocol</span> <span class=attr>name</span>=<span class=string>"dubbo"</span> <span class=attr>port</span>=<span class=string>"20881"</span>></span><span class=tag>&LT/<span class=name>dubbo:protocol</span>></span></span><br><span class=line>	<span class=comment>&LT!-- 扫描指定包，加入@Service注解的类会被发布为服务  --></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:annotation</span> <span class=attr>package</span>=<span class=string>"com.itheima.service.impl"</span> /></span></span><br><span class=line><span class=tag>&LT/<span class=name>beans</span>></span></span><br></pre></table></figure><p>6、启动服务<p>tomcat7:run<h2 id=4-2、服务消费方开发><a class=headerlink href=#4-2、服务消费方开发 title=4.2、服务消费方开发></a>4.2、服务消费方开发</h2><p>开发步骤：<p>（1）创建maven工程（打包方式为war）dubbodemo_consumer，pom.xml配置和上面服务提供者相同，只需要将Tomcat插件的端口号改为8082即可<p>（2）配置web.xml文件<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT!DOCTYPE <span class=keyword>web-app</span> <span class=keyword>PUBLIC</span></span></span><br><span class=line><span class=meta> <span class=string>"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class=line><span class=meta> <span class=string>"http://java.sun.com/dtd/web-app_2_3.dtd"</span> ></span></span><br><span class=line><span class=tag><<span class=name>web-app</span>></span></span><br><span class=line>  <span class=tag><<span class=name>display-name</span>></span>Archetype Created Web Application<span class=tag>&LT/<span class=name>display-name</span>></span></span><br><span class=line>  <span class=tag><<span class=name>servlet</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-class</span>></span>org.springframework.web.servlet.DispatcherServlet<span class=tag>&LT/<span class=name>servlet-class</span>></span></span><br><span class=line>    <span class=comment>&LT!-- 指定加载的配置文件 ，通过参数contextConfigLocation加载 --></span></span><br><span class=line>    <span class=tag><<span class=name>init-param</span>></span></span><br><span class=line>      <span class=tag><<span class=name>param-name</span>></span>contextConfigLocation<span class=tag>&LT/<span class=name>param-name</span>></span></span><br><span class=line>      <span class=tag><<span class=name>param-value</span>></span>classpath:applicationContext-web.xml<span class=tag>&LT/<span class=name>param-value</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>init-param</span>></span></span><br><span class=line>    <span class=tag><<span class=name>load-on-startup</span>></span>1<span class=tag>&LT/<span class=name>load-on-startup</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>servlet</span>></span></span><br><span class=line>  <span class=tag><<span class=name>servlet-mapping</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>url-pattern</span>></span>*.do<span class=tag>&LT/<span class=name>url-pattern</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>servlet-mapping</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>web-app</span>></span></span><br></pre></table></figure><p>（3）将服务提供者工程中的HelloService接口复制到当前工程<p>4、编写Controller<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> com.itheima.controller;</span><br><span class=line><span class=keyword>import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class=line><span class=keyword>import</span> com.itheima.service.HelloService;</span><br><span class=line><span class=keyword>import</span> org.springframework.stereotype.Controller;</span><br><span class=line><span class=keyword>import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=line><span class=keyword>import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class=line></span><br><span class=line><span class=meta>@Controller</span></span><br><span class=line><span class=meta>@RequestMapping("/demo")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloController</span> {</span><br><span class=line>    <span class=meta>@Reference</span></span><br><span class=line>    <span class=keyword>private</span> HelloService helloService;</span><br><span class=line></span><br><span class=line>    <span class=meta>@RequestMapping("/hello")</span></span><br><span class=line>    <span class=meta>@ResponseBody</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>(String name)</span>{</span><br><span class=line>        <span class=comment>//远程调用</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>result</span> <span class=operator>=</span> helloService.sayHello(name);</span><br><span class=line>        System.out.println(result);</span><br><span class=line>        <span class=keyword>return</span> result;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><p>注意：Controller中注入HelloService使用的是Dubbo提供的@Reference注解<p>（5）在src/main/resources下创建applicationContext-web.xml<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT?xml version=<span class=string>"1.0"</span> encoding=<span class=string>"UTF-8"</span>?></span></span><br><span class=line><span class=tag><<span class=name>beans</span> <span class=attr>xmlns</span>=<span class=string>"http://www.springframework.org/schema/beans"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xmlns:xsi</span>=<span class=string>"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xmlns:p</span>=<span class=string>"http://www.springframework.org/schema/p"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xmlns:context</span>=<span class=string>"http://www.springframework.org/schema/context"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xmlns:dubbo</span>=<span class=string>"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xmlns:mvc</span>=<span class=string>"http://www.springframework.org/schema/mvc"</span></span></span><br><span class=line><span class=tag>	<span class=attr>xsi:schemaLocation</span>=<span class=string>"http://www.springframework.org/schema/beans</span></span></span><br><span class=line><span class=string><span class=tag>			http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=line><span class=string><span class=tag>			http://www.springframework.org/schema/mvc</span></span></span><br><span class=line><span class=string><span class=tag>			http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class=line><span class=string><span class=tag>			http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class=line><span class=string><span class=tag>			http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span></span><br><span class=line><span class=string><span class=tag>			http://www.springframework.org/schema/context</span></span></span><br><span class=line><span class=string><span class=tag>			http://www.springframework.org/schema/context/spring-context.xsd"</span>></span></span><br><span class=line></span><br><span class=line>	<span class=comment>&LT!-- 当前应用名称，用于注册中心计算应用间依赖关系，注意：消费者和提供者应用名不要一样 --></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:application</span> <span class=attr>name</span>=<span class=string>"dubbodemo-consumer"</span> /></span></span><br><span class=line>	<span class=comment>&LT!-- 连接服务注册中心zookeeper ip为zookeeper所在服务器的ip地址--></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:registry</span> <span class=attr>address</span>=<span class=string>"zookeeper://192.168.134.129:2181"</span>/></span></span><br><span class=line>	<span class=comment>&LT!-- 扫描的方式暴露接口  --></span></span><br><span class=line>	<span class=tag><<span class=name>dubbo:annotation</span> <span class=attr>package</span>=<span class=string>"com.itheima.controller"</span> /></span></span><br><span class=line><span class=tag>&LT/<span class=name>beans</span>></span></span><br></pre></table></figure><p>（6）运行测试<p><code>tomcat7:run</code>启动<p>在浏览器输入<code>http://localhost:8082/demo/hello.do?name=Jack</code>，查看浏览器输出结果。<blockquote><p><strong>思考一：</strong>上面的Dubbo入门案例中我们是将HelloService接口从服务提供者工程(dubbodemo_provider)复制到服务消费者工程(dubbodemo_consumer)中，这种做法是否合适？还有没有更好的方式？<p><strong>答：</strong>这种做法显然是不好的，同一个接口被复制了两份，不利于后期维护。更好的方式是单独创建一个maven工程，将此接口创建在这个maven工程中。需要依赖此接口的工程只需要在自己工程的pom.xml文件中引入maven坐标即可。<p><strong>思考二：</strong>在服务消费者工程(dubbodemo_consumer)中只是引用了HelloService接口，并没有提供实现类，Dubbo是如何做到远程调用的？<p><strong>答：</strong>Dubbo底层是基于代理技术为HelloService接口创建代理对象，远程调用是通过此代理对象完成的。可以通过开发工具的debug功能查看此代理对象的内部结构。另外，Dubbo实现网络传输底层是基于Netty框架完成的。<p><strong>思考三：</strong>上面的Dubbo入门案例中我们使用Zookeeper作为服务注册中心，服务提供者需要将自己的服务信息注册到Zookeeper，服务消费者需要从Zookeeper订阅自己所需要的服务，此时Zookeeper服务就变得非常重要了，那如何防止Zookeeper单点故障呢？<p><strong>答：</strong>Zookeeper其实是支持集群模式的，可以配置Zookeeper集群来达到Zookeeper服务的高可用，防止出现单点故障。</blockquote><h1 id=5、Dubbo管理控制台><a class=headerlink href=#5、Dubbo管理控制台 title=5、Dubbo管理控制台></a>5、Dubbo管理控制台</h1><p>Zookeeper注册中心中注册了哪些服务提供者和消费者，可以通过一个管理中心来进行管理。该管理中心是一个springboot项目，直接启动即可。<h2 id=5-1、安装><a class=headerlink href=#5-1、安装 title=5.1、安装></a>5.1、安装</h2><p>安装步骤：<ol><li><p>将资料中的dubbo-admin-2.6.0.war文件复制到tomcat的webapps目录下</p><li><p>启动tomcat，此war文件会自动解压</p><li><p>修改WEB-INF下的dubbo.properties文件，注意dubbo.registry.address对应的值需要对应当前使用的Zookeeper的ip地址和端口号</p> <figure class="highlight properties"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=attr>dubbo.registry.address</span>=<span class=string>zookeeper://192.168.134.129:2181</span></span><br><span class=line><span class=attr>dubbo.admin.root.password</span>=<span class=string>root</span></span><br><span class=line><span class=attr>dubbo.admin.guest.password</span>=<span class=string>guest</span></span><br></pre></table></figure><li><p>重启tomcat</p></ol><h2 id=5-2、使用><a class=headerlink href=#5-2、使用 title=5.2、使用></a>5.2、使用</h2><p>操作步骤：<ol><li>访问<code>http://localhost:8080/dubbo-admin-2.6.0/</code>，输入用户名(<code>root</code>)和密码(<code>root</code>)。<li>启动服务提供者工程和服务消费者工程，可以在查看到对应的信息。</ol><h1 id=6、Dubbo相关配置><a class=headerlink href=#6、Dubbo相关配置 title=6、Dubbo相关配置></a>6、Dubbo相关配置</h1><h2 id=6-1、包扫描><a class=headerlink href=#6-1、包扫描 title=6.1、包扫描></a>6.1、包扫描</h2><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>dubbo:annotation</span> <span class=attr>package</span>=<span class=string>"com.itheima.service"</span> /></span></span><br></pre></table></figure><p>服务提供者和服务消费者都需要配置，表示包扫描，作用是扫描指定包(包括子包)下的类。<p>如果不使用包扫描，也可以通过如下配置的方式来发布服务：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>bean</span> <span class=attr>id</span>=<span class=string>"helloService"</span> <span class=attr>class</span>=<span class=string>"com.itheima.service.impl.HelloServiceImpl"</span> /></span></span><br><span class=line><span class=tag><<span class=name>dubbo:service</span> <span class=attr>interface</span>=<span class=string>"com.itheima.api.HelloService"</span> <span class=attr>ref</span>=<span class=string>"helloService"</span> /></span></span><br></pre></table></figure><p>作为服务消费者，可以通过如下配置来引用服务：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- 生成远程服务代理，可以和本地bean一样使用helloService --></span></span><br><span class=line><span class=tag><<span class=name>dubbo:reference</span> <span class=attr>id</span>=<span class=string>"helloService"</span> <span class=attr>interface</span>=<span class=string>"com.itheima.api.HelloService"</span> /></span></span><br></pre></table></figure><p>上面这种方式发布和引用服务，一个配置项(<a href=dubbo:service>dubbo:service</a>、<a href=dubbo:reference>dubbo:reference</a>)只能发布或者引用一个服务，如果有多个服务，这种方式就比较繁琐了。推荐使用包扫描方式。<h2 id=6-2、协议><a class=headerlink href=#6-2、协议 title=6.2、协议></a>6.2、协议</h2><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>dubbo:protocol</span> <span class=attr>name</span>=<span class=string>"dubbo"</span> <span class=attr>port</span>=<span class=string>"20880"</span>/></span></span><br></pre></table></figure><p>一般在服务提供者一方配置，可以指定使用的协议名称和端口号。<p>其中Dubbo支持的协议有：dubbo、rmi、hessian、http、webservice、rest、redis等。<p>推荐使用的是dubbo协议。<p>dubbo 协议采用单一长连接和 NIO 异步通讯，适合于小数据量大并发的服务调用，以及服务消费者机器数远大于服务提供者机器数的情况。不适合传送大数据量的服务，比如传文件，传视频等，除非请求量很低。<p>也可以在同一个工程中配置多个协议，不同服务可以使用不同的协议，例如：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- 多协议配置 --></span></span><br><span class=line><span class=tag><<span class=name>dubbo:protocol</span> <span class=attr>name</span>=<span class=string>"dubbo"</span> <span class=attr>port</span>=<span class=string>"20880"</span> /></span></span><br><span class=line><span class=tag><<span class=name>dubbo:protocol</span> <span class=attr>name</span>=<span class=string>"rmi"</span> <span class=attr>port</span>=<span class=string>"1099"</span> /></span></span><br><span class=line><span class=comment>&LT!-- 使用dubbo协议暴露服务 --></span></span><br><span class=line><span class=tag><<span class=name>dubbo:service</span> <span class=attr>interface</span>=<span class=string>"com.itheima.api.HelloService"</span> <span class=attr>ref</span>=<span class=string>"helloService"</span> <span class=attr>protocol</span>=<span class=string>"dubbo"</span> /></span></span><br><span class=line><span class=comment>&LT!-- 使用rmi协议暴露服务 --></span></span><br><span class=line><span class=tag><<span class=name>dubbo:service</span> <span class=attr>interface</span>=<span class=string>"com.itheima.api.DemoService"</span> <span class=attr>ref</span>=<span class=string>"demoService"</span> <span class=attr>protocol</span>=<span class=string>"rmi"</span> /></span> </span><br></pre></table></figure><h2 id=6-3、启动时检查><a class=headerlink href=#6-3、启动时检查 title=6.3、启动时检查></a>6.3、启动时检查</h2><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>dubbo:consumer</span> <span class=attr>check</span>=<span class=string>"false"</span>/></span></span><br></pre></table></figure><p>上面这个配置需要配置在服务消费者一方，如果不配置默认check值为true。Dubbo 缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止 Spring 初始化完成，以便上线时，能及早发现问题。可以通过将check值改为false来关闭检查。<p>建议在开发阶段将check值设置为false，在生产环境下改为true。<h2 id=6-4、负载均衡><a class=headerlink href=#6-4、负载均衡 title=6.4、负载均衡></a>6.4、负载均衡</h2><p>负载均衡（Load Balance）就是<strong>将请求分摊到多个操作单元上进行执行，从而共同完成工作任务</strong>。<p>Dubbo 提供了多种均衡策略（随机、轮询、最少活跃调用数、一致性Hash等），缺省为random随机调用。<p>配置负载均衡策略，既可以在服务提供者一方配置，也可以在服务消费者一方配置，如下：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=meta>@Controller</span></span><br><span class=line><span class=meta>@RequestMapping("/demo")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloController</span> {</span><br><span class=line>    <span class=comment>//在服务消费者一方配置负载均衡策略</span></span><br><span class=line>    <span class=meta>@Reference(check = false,loadbalance = "random")</span></span><br><span class=line>    <span class=keyword>private</span> HelloService helloService;</span><br><span class=line></span><br><span class=line>    <span class=meta>@RequestMapping("/hello")</span></span><br><span class=line>    <span class=meta>@ResponseBody</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>(String name)</span>{</span><br><span class=line>        <span class=comment>//远程调用</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>result</span> <span class=operator>=</span> helloService.sayHello(name);</span><br><span class=line>        System.out.println(result);</span><br><span class=line>        <span class=keyword>return</span> result;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=comment>//在服务提供者一方配置负载均衡</span></span><br><span class=line><span class=meta>@Service(loadbalance = "random")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloServiceImpl</span> <span class=keyword>implements</span> <span class="title class_">HelloService</span> {</span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">sayHello</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"hello "</span> + name;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><p>可以通过启动多个服务提供者来观察Dubbo负载均衡效果。<p>注意：因为我们是在一台机器上启动多个服务提供者，所以需要修改tomcat的端口号和Dubbo服务的端口号来防止端口冲突。<p>在实际生产环境中，多个服务提供者分别部署在不同的机器上，所以不存在端口冲突问题。</div><footer class=post-footer><div class=post-tags><a href=/tags/Dubbo/ rel=tag># Dubbo</a><a href=/tags/Dubbo%E5%9F%BA%E7%A1%80/ rel=tag># Dubbo基础</a></div><div class=post-nav><div class=post-nav-item><a href=/2024/08/21/Apache%20Dubbo%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ rel=prev title=Dubbo系列-Dubbo原理解析> <i class="fa fa-angle-left"></i> Dubbo系列-Dubbo原理解析 </a></div><div class=post-nav-item><a href=/2024/08/21/ASM%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/ rel=next title=Java系列-ASM> Java系列-ASM <i class="fa fa-angle-right"></i> </a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© <span itemprop=copyrightYear>2024</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>豪哥</span></div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/sidebar.js></script><script src=/js/next-boot.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=/js/third-party/search/local-search.js></script>