<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta media="(prefers-color-scheme: light)" content=#222 name=theme-color><meta media="(prefers-color-scheme: dark)" content=#222 name=theme-color><meta content="Hexo 7.3.0" name=generator><link href=/images/apple-touch-icon-next.png rel=apple-touch-icon sizes=180x180><link href=/images/favicon-32x32-next.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16-next.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><link href=/css/main.css rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity=sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"hshz21.gitee.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta content="1、前言1.1、Java Web组件Java中的web框架都是基于Java Web基础组件来实现。这些基础组件如下：  Servlet：服务端小程序，负责接收请求并响应。  Filter：过滤器，负责对请求进行过滤。  Listener：监听器，负责监听域对象的创建、属性变化。   1.2、Servlet四大作用域    生命周期 作用范围 作用    application 当Web应用被加载到" name=description><meta content=article property=og:type><meta content=Spring系列-SpringMVC property=og:title><meta content=https://hshz21.gitee.io/2024/08/21/SpringMVC/index.html property=og:url><meta content=豪哥博客 property=og:site_name><meta content="1、前言1.1、Java Web组件Java中的web框架都是基于Java Web基础组件来实现。这些基础组件如下：  Servlet：服务端小程序，负责接收请求并响应。  Filter：过滤器，负责对请求进行过滤。  Listener：监听器，负责监听域对象的创建、属性变化。   1.2、Servlet四大作用域    生命周期 作用范围 作用    application 当Web应用被加载到" property=og:description><meta content=zh_CN property=og:locale><meta content=2024-08-21T13:39:14.751Z property=article:published_time><meta content=2023-10-04T07:45:18.548Z property=article:modified_time><meta content=豪哥 property=article:author><meta content=Spring property=article:tag><meta content=SpringMVC property=article:tag><meta content=summary name=twitter:card><link href=https://hshz21.gitee.io/2024/08/21/SpringMVC/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hshz21.gitee.io/2024/08/21/SpringMVC/","path":"2024/08/21/SpringMVC/","title":"Spring系列-SpringMVC"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Spring系列-SpringMVC | 豪哥博客</title><noscript><link href=/css/noscript.css rel=stylesheet></noscript><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>豪哥博客</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>豪哥博客</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#1%E3%80%81%E5%89%8D%E8%A8%80><span class=nav-number>1.</span> <span class=nav-text>1、前言</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#1-1%E3%80%81Java-Web%E7%BB%84%E4%BB%B6><span class=nav-number>1.1.</span> <span class=nav-text>1.1、Java Web组件</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#1-2%E3%80%81Servlet%E5%9B%9B%E5%A4%A7%E4%BD%9C%E7%94%A8%E5%9F%9F><span class=nav-number>1.2.</span> <span class=nav-text>1.2、Servlet四大作用域</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#2%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86><span class=nav-number>2.</span> <span class=nav-text>2、基础知识</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#2-1%E3%80%81SpringMVC%E5%AE%9A%E4%B9%89><span class=nav-number>2.1.</span> <span class=nav-text>2.1、SpringMVC定义</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#2-2%E3%80%81DispatcherServlet><span class=nav-number>2.2.</span> <span class=nav-text>2.2、DispatcherServlet</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#2-3%E3%80%81%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91><span class=nav-number>2.3.</span> <span class=nav-text>2.3、转发和重定向</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-3-1%E3%80%81%E8%AF%AD%E6%B3%95%E7%89%B9%E7%82%B9><span class=nav-number>2.3.1.</span> <span class=nav-text>2.3.1、语法特点</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#3%E3%80%81%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8><span class=nav-number>3.</span> <span class=nav-text>3、快速入门</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#3-1%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87><span class=nav-number>3.1.</span> <span class=nav-text>3.1、环境准备</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#3-2%E3%80%81%E5%9F%BA%E4%BA%8EXML%E5%AE%9E%E7%8E%B0><span class=nav-number>3.2.</span> <span class=nav-text>3.2、基于XML实现</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#3-3%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0><span class=nav-number>3.3.</span> <span class=nav-text>3.3、基于注解实现</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-1%E3%80%81%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90><span class=nav-number>3.3.1.</span> <span class=nav-text>3.3.1、原理解析</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#3-3-2%E3%80%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0><span class=nav-number>3.3.2.</span> <span class=nav-text>3.3.2、代码实现</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94><span class=nav-number>4.</span> <span class=nav-text>请求和响应</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#1-1%E3%80%81%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93><span class=nav-number>4.1.</span> <span class=nav-text>1.1、数据传输</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-1%E3%80%81%E5%89%8D%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E5%90%8E%E7%AB%AF><span class=nav-number>4.1.1.</span> <span class=nav-text>1.1.1、前端数据传后端</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-1%E3%80%81%E6%99%AE%E9%80%9A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.1.1.</span> <span class=nav-text>1.1.1.1、普通数据类型</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-2%E3%80%81%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.1.2.</span> <span class=nav-text>1.1.1.2、实体类类型</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-3%E3%80%81%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.1.3.</span> <span class=nav-text>1.1.1.3、数组类型</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-4%E3%80%81%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.1.4.</span> <span class=nav-text>1.1.1.4、集合类型</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-5%E3%80%81JSON%E6%95%B0%E6%8D%AE><span class=nav-number>4.1.1.5.</span> <span class=nav-text>1.1.1.5、JSON数据</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-1-6%E3%80%81%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.1.6.</span> <span class=nav-text>1.1.1.6、日期类型</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-2%E3%80%81%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E5%89%8D%E7%AB%AF><span class=nav-number>4.1.2.</span> <span class=nav-text>1.1.2、后端数据传前端</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-1%E3%80%81Servlet-API><span class=nav-number>4.1.2.1.</span> <span class=nav-text>1.1.2.1、Servlet API</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-2%E3%80%81ModelAndView><span class=nav-number>4.1.2.2.</span> <span class=nav-text>1.1.2.2、ModelAndView</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-3%E3%80%81Model><span class=nav-number>4.1.2.3.</span> <span class=nav-text>1.1.2.3、Model</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-4%E3%80%81ModelMap><span class=nav-number>4.1.2.4.</span> <span class=nav-text>1.1.2.4、ModelMap</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-5%E3%80%81Map><span class=nav-number>4.1.2.5.</span> <span class=nav-text>1.1.2.5、Map</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-6%E3%80%81Session%E5%9F%9F><span class=nav-number>4.1.2.6.</span> <span class=nav-text>1.1.2.6、Session域</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-1-2-7%E3%80%81Application%E5%9F%9F><span class=nav-number>4.1.2.7.</span> <span class=nav-text>1.1.2.7、Application域</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-2%E3%80%81HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94><span class=nav-number>4.2.</span> <span class=nav-text>1.2、HTTP请求和响应</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-1%E3%80%81%E6%A6%82%E8%BF%B0><span class=nav-number>4.2.1.</span> <span class=nav-text>1.2.1、概述</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-2%E3%80%81%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%95%B0%E6%8D%AE><span class=nav-number>4.2.2.</span> <span class=nav-text>1.2.2、获取请求头数据</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-3%E3%80%81HTTP%E7%8A%B6%E6%80%81%E7%A0%81><span class=nav-number>4.3.</span> <span class=nav-text>1.3、HTTP状态码</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-1%E3%80%811xx%EF%BC%9A%E4%BF%A1%E6%81%AF%E7%8A%B6%E6%80%81%E7%A0%81><span class=nav-number>4.3.1.</span> <span class=nav-text>1.3.1、1xx：信息状态码</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-2%E3%80%812xxx%EF%BC%9A%E6%88%90%E5%8A%9F%E7%8A%B6%E6%80%81%E7%A0%81><span class=nav-number>4.3.2.</span> <span class=nav-text>1.3.2、2xxx：成功状态码</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-3%E3%80%813xxx%EF%BC%9A%E9%87%8D%E5%AE%9A%E5%90%91%E7%8A%B6%E6%80%81%E7%A0%81><span class=nav-number>4.3.3.</span> <span class=nav-text>1.3.3、3xxx：重定向状态码</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-4%E3%80%814xxx%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF><span class=nav-number>4.3.4.</span> <span class=nav-text>1.3.4、4xxx：客户端错误</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-5%E3%80%815xxx%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF><span class=nav-number>4.3.5.</span> <span class=nav-text>1.3.5、5xxx：服务器错误</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90><span class=nav-number>5.</span> <span class=nav-text>原理解析</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#1-1%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86><span class=nav-number>5.1.</span> <span class=nav-text>1.1、静态资源处理</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-1%E3%80%81DefaultServlet><span class=nav-number>5.1.1.</span> <span class=nav-text>1.1.1、DefaultServlet</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-2%E3%80%81mvc-resouces><span class=nav-number>5.1.2.</span> <span class=nav-text>1.1.2、mvc:resouces</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-3%E3%80%81mvc-default-servlet-handler><span class=nav-number>5.1.3.</span> <span class=nav-text>1.1.3、mvc:default-servlet-handler</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-2%E3%80%81DispatcherServlet%E5%88%9D%E5%A7%8B%E5%8C%96><span class=nav-number>5.2.</span> <span class=nav-text>1.2、DispatcherServlet初始化</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-1%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B><span class=nav-number>5.2.1.</span> <span class=nav-text>1.2.1、初始化流程</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-2%E3%80%81%E9%BB%98%E8%AE%A4%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BB%84%E4%BB%B6><span class=nav-number>5.2.2.</span> <span class=nav-text>1.2.2、默认初始化组件</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-3%E3%80%81mvc-default-servlet-handler><span class=nav-number>5.2.3.</span> <span class=nav-text>1.2.3、mvc:default-servlet-handler</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-4%E3%80%81mvc-annotation-driven><span class=nav-number>5.2.4.</span> <span class=nav-text>1.2.4、mvc:annotation-driven</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#1-3%E3%80%81-EnableWebMvc><span class=nav-number>5.3.</span> <span class=nav-text>1.3、@EnableWebMvc</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#1-4%E3%80%81HTTP%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B><span class=nav-number>5.4.</span> <span class=nav-text>1.4、HTTP请求处理流程</span></a></ol></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt=豪哥 class=site-author-image itemprop=image src=/static/imgs/avatar.png><p class=site-author-name itemprop=name>豪哥<div class=site-description itemprop=description>豪哥博客</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>116</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>36</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>129</span> <span class=site-state-item-name>标签</span></a></div></nav></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://hshz21.gitee.io/2024/08/21/SpringMVC/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=/static/imgs/avatar.png itemprop=image> <meta content=豪哥 itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=豪哥博客 itemprop=name> <meta content=豪哥博客 itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="Spring系列-SpringMVC | 豪哥博客" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>Spring系列-SpringMVC</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2024-08-21 21:39:14" datetime=2024-08-21T21:39:14+08:00>2024-08-21</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-10-04 15:45:18" datetime=2023-10-04T15:45:18+08:00 itemprop=dateModified>2023-10-04</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Spring/ itemprop=url rel=index><span itemprop=name>Spring</span></a> </span> </span></div></div></header><div class=post-body itemprop=articleBody><h1 id=1、前言><a class=headerlink href=#1、前言 title=1、前言></a>1、前言</h1><h2 id=1-1、Java-Web组件><a title="1.1、Java Web组件" class=headerlink href=#1-1、Java-Web组件></a>1.1、Java Web组件</h2><p>Java中的web框架都是基于Java Web基础组件来实现。这些基础组件如下：<ul><li><p><strong>Servlet</strong>：服务端小程序，负责<strong>接收请求并响应</strong>。</p><li><p><strong>Filter</strong>：过滤器，负责<strong>对请求进行过滤</strong>。</p><li><p><strong>Listener</strong>：监听器，负责<strong>监听域对象的创建、属性变化</strong>。</p></ul><h2 id=1-2、Servlet四大作用域><a class=headerlink href=#1-2、Servlet四大作用域 title=1.2、Servlet四大作用域></a>1.2、Servlet四大作用域</h2><table><thead><tr><th align=center><th align=center>生命周期<th align=center>作用范围<th align=center>作用<tbody><tr><td align=center><strong>application</strong><td align=center>当Web应用被加载到容器中时创建代表整个web应用的application对象，当服务器关闭或Web应用被移除时，application对象也会被销毁。<td align=center>整个web应用。<td align=center>存储公共数据。<tr><td align=center><strong>session</strong><td align=center>第一次调用request.getSession()方法时，服务器会检查是否已经有对应的session，如果没有则在内存中创建一个session并返回。<td align=center>一次会话。<td align=center>保存登录用户、购物车等信息。<tr><td align=center><strong>request</strong><td align=center>service方法调用前由服务器创建，传入service方法。整个请求结束，request生命结束。<td align=center>整个请求URL中。<td align=center>整个请求url中共享数据。参数可以放在Request域中带过去。<tr><td align=center><strong>pageContext</strong><td align=center>请求时开始，响应结束时销毁。<td align=center>整个页面，四大作用域中最小的一个。<td align=center></table><h1 id=2、基础知识><a class=headerlink href=#2、基础知识 title=2、基础知识></a>2、基础知识</h1><h2 id=2-1、SpringMVC定义><a class=headerlink href=#2-1、SpringMVC定义 title=2.1、SpringMVC定义></a>2.1、SpringMVC定义</h2><p><strong>SpringMVC 是 Spring 3.0 发布的一个基于Spring的MVC轻量级框架。使用DispatcherServlet作为前端控制器，其内部提供了处理器映射器、处理器适配器、视图解析器等组件，可以简化开发。</strong><h2 id=2-2、DispatcherServlet><a class=headerlink href=#2-2、DispatcherServlet title=2.2、DispatcherServlet></a>2.2、DispatcherServlet</h2><p><strong>DispatcherServlet 是 SpringMVC 的入口，本质是一个Servlet，配置了load-on-startup时，会在服务器启动时完成创建和初始化操作，每次请求都会执行service方法</strong>。<p>DispatcherServlet 初始化主要做了两件事：<strong>创建一个Spring MVC容器、注册了 SpringMVC 九大组件</strong>。<h2 id=2-3、转发和重定向><a class=headerlink href=#2-3、转发和重定向 title=2.3、转发和重定向></a>2.3、转发和重定向</h2><h3 id=2-3-1、语法特点><a class=headerlink href=#2-3-1、语法特点 title=2.3.1、语法特点></a>2.3.1、语法特点</h3><p><strong>（1）转发</strong><p>转发语法：<code>return "forward:/index.jsp";</code>；<p>特点：浏览器中的请求地址不会变。<p><strong>（2）重定向</strong><p>重定向语法：<code>return "redirect:/index.jsp";</code>；<p>特点：浏览器中的请求地址会变为转发后的地址。<h1 id=3、快速入门><a class=headerlink href=#3、快速入门 title=3、快速入门></a>3、快速入门</h1><h2 id=3-1、环境准备><a class=headerlink href=#3-1、环境准备 title=3.1、环境准备></a>3.1、环境准备</h2><p>导入<code>spring-webbmvc</code>依赖。<h2 id=3-2、基于XML实现><a class=headerlink href=#3-2、基于XML实现 title=3.2、基于XML实现></a>3.2、基于XML实现</h2><p>web.xml文件内容：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!--配置SpringMVC--></span></span><br><span class=line><span class=tag><<span class=name>servlet</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-class</span>></span>org.springframework.web.servlet.DispatcherServlet<span class=tag>&LT/<span class=name>servlet-class</span>></span></span><br><span class=line>    <span class=tag><<span class=name>init-param</span>></span></span><br><span class=line>        <span class=tag><<span class=name>param-name</span>></span>contextConfigLocation<span class=tag>&LT/<span class=name>param-name</span>></span></span><br><span class=line>        <span class=tag><<span class=name>param-value</span>></span>classpath:springmvc.xml<span class=tag>&LT/<span class=name>param-value</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>init-param</span>></span></span><br><span class=line>    <span class=tag><<span class=name>load-on-startup</span>></span>1<span class=tag>&LT/<span class=name>load-on-startup</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet</span>></span></span><br><span class=line><span class=tag><<span class=name>servlet-mapping</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>url-pattern</span>></span>/<span class=tag>&LT/<span class=name>url-pattern</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet-mapping</span>></span></span><br></pre></table></figure><p>spring-mvc.xml文件内容：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!--扫描控制器组件，并将之放入sring mvc容器中--></span></span><br><span class=line><span class=tag><<span class=name>context:component-scan</span> <span class=attr>base-package</span>=<span class=string>"cn.shh.ssm.template.controller"</span>/></span></span><br><span class=line></span><br><span class=line><span class=comment>&LT!--</span></span><br><span class=line><span class=comment>    开启注解驱动。</span></span><br><span class=line><span class=comment>    作用：请求首先由DisptcherServlet处理，无法处理时再交给普通的Servlet来处理。</span></span><br><span class=line><span class=comment>--></span></span><br><span class=line><span class=tag><<span class=name>mvc:annotation-driven</span>/></span></span><br><span class=line></span><br><span class=line><span class=comment>&LT!--</span></span><br><span class=line><span class=comment>    配置默认的servlet处理器。</span></span><br><span class=line><span class=comment>    作用：没有DispatcherServlet时，所有请求都会被当前处理器处理，但却处理不了，</span></span><br><span class=line><span class=comment>         故一般配合DispatcherServlet来一起处理（配置&LTmvc:annotation-driven/>即可）。</span></span><br><span class=line><span class=comment>--></span></span><br><span class=line><span class=tag><<span class=name>mvc:default-servlet-handler</span>/></span></span><br></pre></table></figure><p>到此，配置完成。<h2 id=3-3、基于注解实现><a class=headerlink href=#3-3、基于注解实现 title=3.3、基于注解实现></a>3.3、基于注解实现</h2><h3 id=3-3-1、原理解析><a class=headerlink href=#3-3-1、原理解析 title=3.3.1、原理解析></a>3.3.1、原理解析</h3><p><strong>（1）替换<code>&LTmvc:annotation-driven/></code>和<code>&LTmvc:default-servlet-handler/></code></strong><p><code>&LTmvc:annotation-driven/></code>和<code>&LTmvc:default-servlet-handler/></code>两个标签可以被一个注解<code>@EnableWebMvc</code>替换。<p>该注解导入了一个类<code>DelegatingWebMvcConfiguration</code>，该类中有一个方法<code>setConfigurers(List&LTWebMvcConfigurer> configs)</code>可以实现添加自定义配置。只需实现WebMvcConfigurer接口并实现相关方法，然后在方法中编写自定义配置逻辑即可，比如添加自定义拦截器、配置默认的ServletHandling等。此外，该类继承了类<code>WebMvcConfigurationSupport</code>，类<code>WebMvcConfigurationSupport</code>的作用等同于标签<code>&LTmvc:annotation-driven/></code>。<p><strong>（2）替换spring-mvc.xml文件</strong><p>起初，通过在web.xml中配置参数属性<code>contextConfigLocation</code>指定spring.xml文件来实现spring mvc配置的加载。<p>现在我们要替换这种形式，选择通过一个实现了接口<code>AnnotationConfigWebApplicationContext</code>的Java类来实现Spring mvc配置的加载，方法与起初类似，在web.xml文件中通过参数属性<code>contextClass</code>来指定这个Java类即可。<p>优化的结果如下：<p>web.xml文件：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>servlet</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-class</span>></span>org.springframework.web.servlet.DispatcherServlet<span class=tag>&LT/<span class=name>servlet-class</span>></span></span><br><span class=line>    <span class=comment>&LT!--&LTinit-param></span></span><br><span class=line><span class=comment>            &LTparam-name>contextConfigLocation&LT/param-name></span></span><br><span class=line><span class=comment>            &LTparam-value>classpath:springmvc.xml&LT/param-value></span></span><br><span class=line><span class=comment>        &LT/init-param>--></span></span><br><span class=line>    <span class=tag><<span class=name>init-param</span>></span></span><br><span class=line>        <span class=tag><<span class=name>param-name</span>></span>contextClass<span class=tag>&LT/<span class=name>param-name</span>></span></span><br><span class=line>        <span class=tag><<span class=name>param-value</span>></span>cn.shh.ssm.template.config.MyAnnotationConfigWebApplicationContext<span class=tag>&LT/<span class=name>param-value</span>></span></span><br><span class=line>    <span class=tag>&LT/<span class=name>init-param</span>></span></span><br><span class=line>    <span class=tag><<span class=name>load-on-startup</span>></span>1<span class=tag>&LT/<span class=name>load-on-startup</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet</span>></span></span><br><span class=line><span class=tag><<span class=name>servlet-mapping</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>springmvc<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>url-pattern</span>></span>/<span class=tag>&LT/<span class=name>url-pattern</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet-mapping</span>></span></span><br></pre></table></figure><p>SpringMVC配置类：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=meta>@ComponentScan("cn.shh.ssm.template.controller")</span></span><br><span class=line><span class=meta>@EnableWebMvc</span></span><br><span class=line><span class=meta>@Configuration</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">SpringMvcConfig</span> {</span><br><span class=line>    <span class=comment>//...</span></span><br><span class=line>}</span><br></pre></table></figure><p>注册SpringMVC配置类的工具类：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">MyAnnotationConfigWebApplicationContext</span> <span class=keyword>extends</span> <span class="title class_">AnnotationConfigWebApplicationContext</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">MyAnnotationConfigWebApplicationContext</span><span class=params>()</span> {</span><br><span class=line>        <span class=built_in>super</span>.register(SpringMvcConfig.class);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><p>如上配置实现了从加载配置文件到加载配置类的转变，但有一点要注意，那就是web.xml文件还没有舍弃，依然存在。<p>要想舍弃web.xml文件，做到彻底的全注解开发，这需要Sevlet 3.0技术的支持。<p><strong>（3）借助 Servlet 3.0 来舍弃 web.xml 文件</strong><p>servlet 3.0中提供了一个接口<code>javax.servlet.ServletContainerInitialize</code>，实现该接口，并在类加载路径的<code>META-INF/services</code>目录下创建一个名为<code>javax.servlet.ServletContainerInitializer</code>的文件，文件内容就是该接口实现类的全类名。这样，web容器启动时就会执行这个初始化器来做一些初始化工作。<p>基于该接口，Spring提供了一个该接口的实现<code>SpringServletContainerInitializer</code>，该实现会查找<code>WebApplicationInitializer</code>的实现类，而Spring提供了一个<code>WebApplicationInitializer</code>的基础实现类<code>AbstractAnnotationConfigDispatcherServletInitializer</code>，我们可以通过继承该基础实现类，来指定Spring和SpringMVC配置的入口，进而实现全注解开发。<h3 id=3-3-2、代码实现><a class=headerlink href=#3-3-2、代码实现 title=3.3.2、代码实现></a>3.3.2、代码实现</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=meta>@Import({JDBCConfig.class, MyBatisConfig.class})</span></span><br><span class=line><span class=meta>@ComponentScan(basePackages = {"cn.shh.ssm.template.service"})</span></span><br><span class=line><span class=meta>@EnableTransactionManagement</span></span><br><span class=line><span class=meta>@Configuration</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">SpringConfig</span> {</span><br><span class=line>    <span class=comment>//...</span></span><br><span class=line>}</span><br><span class=line></span><br><span class=line>---</span><br><span class=line></span><br><span class=line><span class=meta>@ComponentScan("cn.shh.ssm.template.controller")</span></span><br><span class=line><span class=meta>@EnableWebMvc</span></span><br><span class=line><span class=meta>@Configuration</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">SpringMVCConfig</span> {</span><br><span class=line>    <span class=comment>//...</span></span><br><span class=line>}</span><br><span class=line></span><br><span class=line>---</span><br><span class=line></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ServletConfig</span> <span class=keyword>extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> {</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>protected</span> Class&LT?>[] getRootConfigClasses() {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">Class</span>[]{SpringConfig.class};</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>protected</span> Class&LT?>[] getServletConfigClasses() {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">Class</span>[]{SpringMVCConfig.class};</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>protected</span> String[] getServletMappings() {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">String</span>[]{<span class=string>"/"</span>};</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=请求和响应><a class=headerlink href=#请求和响应 title=请求和响应></a>请求和响应</h1><h2 id=1-1、数据传输><a class=headerlink href=#1-1、数据传输 title=1.1、数据传输></a>1.1、数据传输</h2><h3 id=1-1-1、前端数据传后端><a class=headerlink href=#1-1-1、前端数据传后端 title=1.1.1、前端数据传后端></a>1.1.1、前端数据传后端</h3><h4 id=1-1-1-1、普通数据类型><a class=headerlink href=#1-1-1-1、普通数据类型 title=1.1.1.1、普通数据类型></a>1.1.1.1、普通数据类型</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testBaseDT</span><span class=params>(String name, <span class=type>int</span> age)</span>{</span><br><span class=line>    System.out.println(name + <span class=string>"/"</span> + age);</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-1-2、实体类类型><a class=headerlink href=#1-1-1-2、实体类类型 title=1.1.1.2、实体类类型></a>1.1.1.2、实体类类型</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">User</span>{</span><br><span class=line>    <span class=keyword>private</span> String name;</span><br><span class=line>    <span class=keyword>private</span> Integer age;</span><br><span class=line>}</span><br><span class=line></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testInstanceDT</span><span class=params>(User user)</span>{</span><br><span class=line>    System.out.println(user.getName() + <span class=string>"/"</span> + user.getAge());</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-1-3、数组类型><a class=headerlink href=#1-1-1-3、数组类型 title=1.1.1.3、数组类型></a>1.1.1.3、数组类型</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=comment>// GET请求URL</span></span><br><span class=line>http:<span class=comment>//localhost:8090/test/dt?like=敲代码&like=看电影&like=旅游</span></span><br><span class=line><span class=comment>// java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testArrayDT</span><span class=params>(String[] like)</span>{</span><br><span class=line>    <span class=keyword>for</span>(String k : like){System.out.println(k);}</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-1-4、集合类型><a class=headerlink href=#1-1-1-4、集合类型 title=1.1.1.4、集合类型></a>1.1.1.4、集合类型</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=comment>// GET请求URL</span></span><br><span class=line>http:<span class=comment>//localhost:8090/test/dt?like=敲代码&like=看电影&like=旅游</span></span><br><span class=line><span class=comment>// Java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testArrayDT</span><span class=params>(<span class=meta>@RequestParam</span> List&LTString> like)</span>{</span><br><span class=line>    <span class=keyword>for</span>(String k : like){System.out.println(k);}</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-1-5、JSON数据><a class=headerlink href=#1-1-1-5、JSON数据 title=1.1.1.5、JSON数据></a>1.1.1.5、JSON数据</h4><p><strong>1）集合类型</strong><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=comment>// GET请求URL</span></span><br><span class=line>http:<span class=comment>//localhost:8090/test/dt</span></span><br><span class=line><span class=comment>// 请求体</span></span><br><span class=line>[<span class=string>"敲代码"</span>, <span class=string>"看电影"</span>, <span class=string>"旅游"</span>]</span><br><span class=line></span><br><span class=line><span class=comment>// Java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testArrayDT</span><span class=params>(<span class=meta>@RequestBody</span> List&LTString> like)</span>{</span><br><span class=line>    <span class=keyword>for</span>(String k : like){System.out.println(k);}</span><br><span class=line>}</span><br></pre></table></figure><p><strong>2）实体类型</strong><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=comment>// 请求体</span></span><br><span class=line>{<span class=string>"name"</span>:<span class=string>"张三"</span>, <span class=string>"age"</span>:<span class=string>"18"</span>}</span><br><span class=line></span><br><span class=line><span class=comment>// Java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testInstanceDT</span><span class=params>(<span class=meta>@RequestBody</span> User user)</span>{</span><br><span class=line>    System.out.println(user.getName() + <span class=string>"/"</span> + user.getAge());</span><br><span class=line>}</span><br></pre></table></figure><p><strong>3）集合+实体</strong><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=comment>// 请求体</span></span><br><span class=line>[{<span class=string>"name"</span>:<span class=string>"张三"</span>, <span class=string>"age"</span>:<span class=string>"18"</span>}, {<span class=string>"name"</span>:<span class=string>"李四"</span>, <span class=string>"age"</span>:<span class=string>"19"</span>}]</span><br><span class=line></span><br><span class=line><span class=comment>// Java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testArrayDT</span><span class=params>(<span class=meta>@RequestBody</span> List&LTUser> users)</span>{</span><br><span class=line>    <span class=keyword>for</span>(String k : like){System.out.println(k);}</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-1-6、日期类型><a class=headerlink href=#1-1-1-6、日期类型 title=1.1.1.6、日期类型></a>1.1.1.6、日期类型</h4><p><strong>1）类型1：2022/10/01</strong><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=comment>// 请求Uri</span></span><br><span class=line>http:<span class=comment>//localhost:8090/test?date=2022/10/01</span></span><br><span class=line></span><br><span class=line><span class=comment>// java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testData</span><span class=params>(Date date)</span>{System.out.println(<span class=string>"date: "</span> + data);}</span><br></pre></table></figure><p><strong>2）类型2：2022-10-01</strong><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=comment>// 请求Uri</span></span><br><span class=line>http:<span class=comment>//localhost:8090/test?date=2022-10-01</span></span><br><span class=line></span><br><span class=line><span class=comment>// java代码</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">testData</span><span class=params>(<span class=meta>@DateTimeFormat(pattern="yyyy-MM-dd")</span> Date date)</span>{</span><br><span class=line>    System.out.println(<span class=string>"date: "</span> + data);</span><br><span class=line>}</span><br></pre></table></figure><h3 id=1-1-2、后端数据传前端><a class=headerlink href=#1-1-2、后端数据传前端 title=1.1.2、后端数据传前端></a>1.1.2、后端数据传前端</h3><h4 id=1-1-2-1、Servlet-API><a title="1.1.2.1、Servlet API" class=headerlink href=#1-1-2-1、Servlet-API></a>1.1.2.1、Servlet API</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>HttpServletRequest.setAttribute(<span class=string>"name"</span>, <span class=string>"张三"</span>);</span><br></pre></table></figure><h4 id=1-1-2-2、ModelAndView><a class=headerlink href=#1-1-2-2、ModelAndView title=1.1.2.2、ModelAndView></a>1.1.2.2、ModelAndView</h4><p>后端代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=type>ModelAndView</span> <span class=variable>mav</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ModelAndView</span>();</span><br><span class=line>mav.addObject(<span class=string>"name"</span>, <span class=string>"张三"</span>);</span><br><span class=line>mav.setViewName(<span class=string>"index"</span>);</span><br><span class=line><span class=keyword>return</span> mav;</span><br></pre></table></figure><p>前端代码：<figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>p</span> <span class=attr>th:text</span>=<span class=string>"${name}"</span>></span><span class=tag>&LT/<span class=name>p</span>></span></span><br></pre></table></figure><h4 id=1-1-2-3、Model><a class=headerlink href=#1-1-2-3、Model title=1.1.2.3、Model></a>1.1.2.3、Model</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">testModel</span><span class=params>(Model model)</span>{</span><br><span class=line>    model.addAttribute(<span class=string>"name"</span>, <span class=string>"Model"</span>);</span><br><span class=line>    <span class=keyword>return</span> <span class=string>"index"</span>;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-2-4、ModelMap><a class=headerlink href=#1-1-2-4、ModelMap title=1.1.2.4、ModelMap></a>1.1.2.4、ModelMap</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">testModelMap</span><span class=params>(ModelMap modelMap)</span>{</span><br><span class=line>    modelMap.addAttribute(<span class=string>"name"</span>, <span class=string>"ModelMap"</span>);</span><br><span class=line>    <span class=keyword>return</span> <span class=string>"index"</span>;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-2-5、Map><a class=headerlink href=#1-1-2-5、Map title=1.1.2.5、Map></a>1.1.2.5、Map</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">testMap</span><span class=params>(Map&LTString, Object> map)</span>{</span><br><span class=line>    map.put(<span class=string>"name"</span>, <span class=string>"Map"</span>);</span><br><span class=line>    <span class=keyword>return</span> <span class=string>"index"</span>;</span><br><span class=line>}</span><br></pre></table></figure><blockquote><p>Model、ModelMap底层都使用BindingAwareModelMap来创建。</blockquote><h4 id=1-1-2-6、Session域><a class=headerlink href=#1-1-2-6、Session域 title=1.1.2.6、Session域></a>1.1.2.6、Session域</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">testSession</span><span class=params>(HttpSession session)</span>{</span><br><span class=line>    session.setAttribute(<span class=string>"name"</span>, <span class=string>"testSession"</span>);</span><br><span class=line>    <span class=keyword>return</span> <span class=string>"index"</span>;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=1-1-2-7、Application域><a class=headerlink href=#1-1-2-7、Application域 title=1.1.2.7、Application域></a>1.1.2.7、Application域</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">testApplication</span><span class=params>(HttpSession session)</span>{</span><br><span class=line>    <span class=type>ServletContext</span> <span class=variable>context</span> <span class=operator>=</span> session.getServletContext();</span><br><span class=line>    context.setAttribute(<span class=string>"name"</span>, <span class=string>"testApplication"</span>);</span><br><span class=line>    <span class=keyword>return</span> <span class=string>"index"</span>;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=1-2、HTTP请求和响应><a class=headerlink href=#1-2、HTTP请求和响应 title=1.2、HTTP请求和响应></a>1.2、HTTP请求和响应</h2><h3 id=1-2-1、概述><a class=headerlink href=#1-2-1、概述 title=1.2.1、概述></a>1.2.1、概述</h3><p><strong>（1）一个http请求包含以下几个组成部分</strong>：<ul><li><p>请求行：包含请求方式、请求地址、协议版本三项。</p> <figure class="highlight http"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>POST /index.php　HTTP/1.1</span><br></pre></table></figure><li><p>请求头</p><li><p>空行</p><li><p>请求数据</p></ul><p><strong>（2）一个http响应包含以下几个组成部分</strong>：<ul><li><p>状态行：包含协议版本、状态码、响应信息三项。</p> <figure class="highlight http"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=meta>HTTP/1.1</span> <span class=number>200</span> OK</span><br></pre></table></figure><li><p>响应头</p><li><p>空行</p><li><p>响应数据</p></ul><h3 id=1-2-2、获取请求头数据><a class=headerlink href=#1-2-2、获取请求头数据 title=1.2.2、获取请求头数据></a>1.2.2、获取请求头数据</h3><p><strong>（1）获取请求头中的所有数据</strong><p>使用注解<code>@RequestHeader</code>修饰控制器方法的形参即可。<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=meta>@GetMapping("/m1")</span></span><br><span class=line><span class=keyword>public</span> String <span class="title function_">m1</span><span class=params>(<span class=meta>@RequestHeader</span> Map&LTString> map)</span>{}</span><br></pre></table></figure><p><strong>（2）获取Cookie</strong><p>使用注解<code>@CookieValue</code>修饰控制器方法的形参即可。<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=meta>@GetMapping("/m1")</span></span><br><span class=line><span class=keyword>public</span> String <span class="title function_">m1</span><span class=params>(<span class=meta>@CookieValue(value="JSESSIONID", default="")</span> String jsessionId)</span>{}</span><br></pre></table></figure><h2 id=1-3、HTTP状态码><a class=headerlink href=#1-3、HTTP状态码 title=1.3、HTTP状态码></a>1.3、HTTP状态码</h2><h3 id=1-3-1、1xx：信息状态码><a class=headerlink href=#1-3-1、1xx：信息状态码 title=1.3.1、1xx：信息状态码></a>1.3.1、1xx：信息状态码</h3><p>1开头的状态码表示 <strong>请求已经被接收且服务器正在处理</strong>。<p>常见的1开头的状态码如下：<ul><li>100：<strong>服务器已经收到请求的初始部分，客户端应该继续发送剩余的部分请求</strong>。<li>101：<strong>服务器已经理解了客户端的请求，正在切换到不同的协议</strong>。<li>102：<strong>服务器正在处理请求，但需要更长的时间</strong>。</ul><h3 id=1-3-2、2xxx：成功状态码><a class=headerlink href=#1-3-2、2xxx：成功状态码 title=1.3.2、2xxx：成功状态码></a>1.3.2、2xxx：成功状态码</h3><p>2开头的状态码表示 <strong>请求已经被服务器接收、理解和处理</strong>。<p>常见状态码如下：<ul><li>200：<strong>请求已成功</strong>。<li>201：<strong>请求已经成功，且在服务器上创建了新的资源</strong>。<li>202：<strong>已接收</strong>。<li>203：非权威性信息。<li>204：<strong>服务器成功处理了请求，但没有返回任何内容</strong>。<li>205：充值内容。<li>206：部分内容。表明已部分下载了一个文件，可以续传损坏的下载或者将下载拆分为多个并发的流。<li>207：多状态（WebDAV）。此消息之前应该还有一条XML消息，其中可能包含几个单独的响应代码，具体取决于发出了多少个子请求。</ul><h3 id=1-3-3、3xxx：重定向状态码><a class=headerlink href=#1-3-3、3xxx：重定向状态码 title=1.3.3、3xxx：重定向状态码></a>1.3.3、3xxx：重定向状态码</h3><p>3开头的状态码表示 <strong>客户端需要采取附加操作才能完成请求</strong>。<p>常见状态码如下：<ul><li>301：<strong>被请求的资源已经永久移动到了新位置</strong>。<li>302：<strong>被请求的资源临时移动到了新位置</strong>。对于基于表单的身份验证，此消息通常表示为“对象已移动”。请求的资源临时驻留在不同的URI。由于重定向有时可能会改变，客户端将来在请求时应该继续使用 RequestURI。只有在 CacheControl 或 Expires 标题字段中指示，此响应才能够缓存。<li>304：<strong>资源未修改，可以使用缓存的版本</strong>。客户端请求的文档已在其缓存中，文档自缓存以来尚未被修改过。客户端使用文档的缓存副本，而不从服务器下载文档。<li>307：<strong>临时重定向</strong>。</ul><h3 id=1-3-4、4xxx：客户端错误><a class=headerlink href=#1-3-4、4xxx：客户端错误 title=1.3.4、4xxx：客户端错误></a>1.3.4、4xxx：客户端错误</h3><p>4开头的状态码表示 <strong>客户端发生错误导致服务器无法处理请求</strong>。<p>常见状态码如下：<ul><li>400：<strong>请求无效或错误，服务器无法理解请求的语法</strong>。<li>401：<strong>请求需要身份验证</strong>。IIS 定义了几个不同的401错误，用于指示更为具体的错误原因。这些具体的错误代码在浏览器中显示，但不在 IIS 日志中显示。<li>403：<strong>服务器拒绝请求</strong>。可以理解为没有权限访问此网站，服务器能够收到请求但拒绝提供服务。IIS 定义了几个不同的403错误，用于指示更为具体的错误原因。<li>404：<strong>没有找到请求的资源</strong>。例如，访问网站中不存在的页面，或者原有页面被移走或删除，则可能会出现该状态码。IIS 定义了几个不同的404错误，用于指示更为具体的错误原因。<li>405：用来访问本页面的 HTTP 谓词不被允许（方法不被允许）。当客户端向运行 IIS 的服务器发送一个 HTTP 请求，并且该请求包含服务器无法识别的 HTTP 动词时，就会发生此错误。若要解决此问题，请确保客户端的请求使用与 HTTP rfc 兼容的 HTTP 动词。<li>406：客户端浏览器不接受所请求页面的 MIME 类型<li>407：要求进行代理身份验证<li>412：前提条件失败<li>413：请求实体太大<li>414：请求URI太长<li>415：不支持的媒体类型<li>416：无法满足请求的范围<li>417：执行失败<li>423：锁定的错误</ul><p><strong>401 状态码：</strong><ul><li>401.1：用户名或密码无效导致登陆失败。<li>401.2：服务器配置导致登陆失败。<li>401.3：由于 ACL 对资源的限制而未获得授权。表示存在 NTFS 权限问题。即使您对试图访问的文件具备相应的权限，也可能发生此错误。例如，如果 IUSR 帐户无权访问 C:WinntSystem32Inetsrv 目录，您会看到这个错误。<li>401.4：筛选器授权失败<li>401.5：ISAPI/CGI 应用程序授权失败<li>401.7：由 Web 服务器上的 URL 验证策略拒绝访问。这个错误代码为 IIS 6.0 所专用。</ul><p><strong>403 状态码：</strong><ul><li>403.1：执行访问被禁止。可能原因：<ul><li>您没有足够的执行许可。例如，如果试图访问的 ASP 页所在的目录权限设为 “无”，或者，试图执行的 CGI 脚本所在的目录权限为 “只允许脚本”，将出现此错误消息。若要修改执行权限，请在 Microsoft 管理控制台（MMC）中右击目录，然后依次单击 “属性” 和 “目录” 选项卡，确保为试图访问的内容设置适当的执行权限。<li>您没有将试图执行的文件类型的脚本映射设置为识别所使用的谓词（例如，GET 或 POST）。若要验证这一点，请在 Microsoft 管理控制台中右键单击目录，依次单击 “属性”、“目录” 选项卡和 “配置”，然后验证相应文件类型的脚本映射是否设置为允许所使用的谓词。</ul><li>403.2：读访问被禁止。验证是否已将 IIS 设置为允许对目录进行读访问。另外，如果您正在使用默认文件，请验证该文件是否存在。<li>403.3：写访问被禁止。验证 IIS 权限和 NTFS 权限是否已设置以便向该目录授予写访问权。<li>403.4：要求 SSL。禁用要求安全通道选项，或使用 HTTPS 代替 HTTP 来访问该页面。<li>403.5：要求 SSL 128。禁用要求128位加密选项，或使用支持128位加密的浏览器以查看该页面。<li>403.6：IP 地址被拒绝。您已经将服务器配置为拒绝访问您当前的 IP 地址。<li>403.7：要求客户端证书。您已经将服务器配置为要求提供证书进行客户端身份验证，但是您没有安装有效的客户端证书。<li>403.8：站点访问被拒绝。您已经为用来访问服务器的域设置了域名限制。<li>403.9：用户数过多。与该服务器连接的用户数量超过了您设置的连接限制。注意：Microsoft Windows 2000 Professional 和 Windows XP Professional 自动设置了在 IIS 上最多10个连接的限制。您无法更改此限制。<li>403.10：配置无效<li>403.11：密码更改<li>403.12：拒绝访问映射表。您要访问的页面要求提供客户端证书。但是，映射到该客户端证书的用户 ID 已经拒绝访问该文件。<li>403.13：客户端证书被吊销<li>403.14：拒绝目录列表<li>403.15：超出客户端访问许可<li>403.16：客户端证书不受信任或无效<li>403.17：客户端证书已过期或尚未生效<li>403.18：在当前的应用程序池中不能执行所请求的URL。这个错误代码为 IIS 6.0 所专用。<li>403.19：不能为这个应用程序池中的客户端执行 CGI。这个错误代码为 IIS 6.0 所专用。<li>403.20：Passport 登录失败。这个错误代码为 IIS 6.0 所专用。</ul><p><strong>404 状态码：</strong><ul><li>404.0：没有找到文件或目录<li>404.1：无法通过请求的端口访问网站。此错误消息表明，试图访问的网站的 IP 地址不接受来自此请求所用端口的请求。<li>404.2：Web 服务扩展锁定策略阻止本请求。在 IIS 6.0 中，表示 Web 服务扩展列表中已经阻止了该请求。<li>404.3：MIME 映射策略阻止了此请求。 如果存在下列情况，将出现此问题：<ul><li>未配置请求的文件扩展名的处理程序映射。<li>没有为网站或应用程序配置相应的 MIME 类型。</ul></ul><h3 id=1-3-5、5xxx：服务器错误><a class=headerlink href=#1-3-5、5xxx：服务器错误 title=1.3.5、5xxx：服务器错误></a>1.3.5、5xxx：服务器错误</h3><p>5开头的状态码表示 <strong>服务器在处理请求时发生了错误</strong>。<p>常见状态码如下：<ul><li>500：<strong>内部服务器错误</strong>。很多服务器端错误都可能导致此错误消息。事件查看器日志包含更详细的错误原因。此外，您可以禁用友好 HTTP 错误消息以便收到详细的错误说明。IIS 定义了几个不同的500错误，用于指示更为具体的错误原因。<li>501：<strong>页眉指定了未实现的配置</strong>。<li>502：作为代理或网关的服务器从上游服务器收到了无效响应。此类错误一般与服务器本身有关（与请求无关）。IIS 定义了几个不同的502错误，用于指示更为具体的错误原因。<li>503：<strong>服务器暂时无法处理请求</strong>。<li>504：网关超时。<li>505：HTTP版本不受支持。</ul><p><strong>500状态码：</strong><ul><li>500.12：应用程序正忙于在 Web 服务器上重新启动。这表示您在 IIS 重新启动应用程序的过程中试图加载 ASP 页。刷新页面后，此消息即会消失。如果刷新页面后，此消息再次出现，可能是防病毒软件正在扫描 Global.asa 文件。<li>500.13：web服务器繁忙。<li>500.15：不允许直接请求 Global.asa。<li>500.16：UNC 授权凭据不正确。这个错误代码为 IIS 6.0 所专用。<li>500.18：无法打开 URL 授权存储库。这个错误代码为 IIS 6.0 所专用。<li>500.19：此文件的数据在元数据库中配置不正确。如果 XML 元数据库在您尝试访问的内容类型中包含无效的配置信息，您就会收到此错误。要解决此问题，请删除或更正无效的配置。此问题通常表示 ScriptMap 元数据库键中存在问题。<li>500.100：内部 ASP 错误。 如果试图加载的 ASP 页中含有错误代码，将出现此错误消息。若要获得更确切的错误消息，请禁用友好 HTTP 错误消息。默认情况下，只会在默认网站上启用此错误消息。</ul><p><strong>502 状态码：</strong><ul><li>502.1：CGI应用程序超时。<li>502.2：CGI 应用程序出错。</ul><h1 id=原理解析><a class=headerlink href=#原理解析 title=原理解析></a>原理解析</h1><h2 id=1-1、静态资源处理><a class=headerlink href=#1-1、静态资源处理 title=1.1、静态资源处理></a>1.1、静态资源处理</h2><p>静态资源的处理方式有如下几种：<ul><li>Tomcat的<code>DefaultServlet</code>；<li>Spring MVC标签<code>&LTmvc:resources /></code>；<li>Spring MVC标签<code>&LTmvc:default-servlet-handler /></code></ul><h3 id=1-1-1、DefaultServlet><a class=headerlink href=#1-1-1、DefaultServlet title=1.1.1、DefaultServlet></a>1.1.1、DefaultServlet</h3><p>如果配置了<code>DispatcherServlet</code>处理器，那么默认使用该处理器；<p>如果没有配置<code>DispatcherServlet</code>处理器，那么会使用Tomcat的<code>DefaultServlet</code>拦截并处理。<code>DefaultServlet</code>的名字是<code>default</code>，拦截路径为<code>/</code>，且具备搜索静态资源的功能，而<code>DispatcherServlet</code>默认没有该功能。<p>如果显式配置了<code>DispatcherServlet</code>，还想使用<code>DefaultServlet</code>来处理，那么可以在<code>web.xml</code>文件中添加如下配置：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- default会映射到Tomcat的DefaultServlet --></span></span><br><span class=line><span class=tag><<span class=name>servlet-mapping</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>default<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-pattern</span>></span>*.html<span class=tag>&LT/<span class=name>servlet-pattern</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet-mapping</span>></span></span><br><span class=line><span class=tag><<span class=name>servlet-mapping</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-name</span>></span>default<span class=tag>&LT/<span class=name>servlet-name</span>></span></span><br><span class=line>    <span class=tag><<span class=name>servlet-pattern</span>></span>/img/*<span class=tag>&LT/<span class=name>servlet-pattern</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>servlet-mapping</span>></span></span><br></pre></table></figure><h3 id=1-1-2、mvc-resouces><a class=headerlink href=#1-1-2、mvc-resouces title=1.1.2、mvc:resouces></a>1.1.2、mvc:resouces</h3><p>在Spring MVC配置文件中添加如下配置内容：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>mvc:resources</span> <span class=attr>mapping</span>=<span class=string>"/img/*"</span> <span class=attr>location</span>=<span class=string>"/img/*"</span> /></span></span><br></pre></table></figure><h3 id=1-1-3、mvc-default-servlet-handler><a class=headerlink href=#1-1-3、mvc-default-servlet-handler title=1.1.3、mvc:default-servlet-handler></a>1.1.3、mvc:default-servlet-handler</h3><p>在Spring MVC配置文件中添加如下配置内容：<figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>mvc:default-servlet-handler</span> /></span></span><br></pre></table></figure><p>该标签会向容器中注入一个<code>DefaultServletHttpRequestHandler</code>，<h2 id=1-2、DispatcherServlet初始化><a class=headerlink href=#1-2、DispatcherServlet初始化 title=1.2、DispatcherServlet初始化></a>1.2、DispatcherServlet初始化</h2><h3 id=1-2-1、初始化流程><a class=headerlink href=#1-2-1、初始化流程 title=1.2.1、初始化流程></a>1.2.1、初始化流程</h3><p>DispatcherServlet的初始化流程如下：<p><strong>（1）调用<code>HttpServletBean</code>的<code>init()</code>方法开始初始化</strong>；<p><strong>（2）调用<code>FrameworkServlet</code>的<code>initServletBean()</code>方法</strong>；<p>**（3）调用<code>FrameworkServlet</code>的<code>initWebApplicationContext()</code>方法来初始化<code>WebApplicationContext</code>**；<p>如果<code>this.webApplicationContext</code>不为null，且没有被激活时，为当前<code>webApplicationContext</code>设置父容器，并通过调用<code>AbstractApplicationContext</code>的<code>refresh</code>方法来刷新当前<code>webApplicationContext</code>。刷新完毕后会发布<code>ContextRefreshedEvent</code>事件。<p>如果<code>this.webApplicationContext</code>为null，先检查<code>ServletContext</code>中是否存在，如果也不存在，那么主动创建<code>WebApplicationContext</code>，并为该<code>WebApplicationContext</code>设置父容器，然后调用<code>AbstractApplicationContext</code>的<code>refresh</code>方法来刷新该<code>webApplicationContext</code>，同样，刷新完毕后会发布<code>ContextRefreshedEvent</code>事件。<p>如果<code>FrameworkServlet</code>没有收到<code>ContextRefreshedEvent</code>事件，那么会主动调用<code>DispatcherServlet</code>的<code>initSrategies</code>方法来初始化9大组件。如果收到了那就会基于事件通知的方式来初始化9大组件。<p><strong>（4）<code>FrameworkServlet</code>会监听<code>ContextRefreshedEvent</code>事件，然后初始化9大组件</strong><p><code>FrameworkServlet</code>的内部类<code>ContextRefreshListener</code>会监听<code>ContextRefreshedEvent</code>事件，然后调用<code>DispatcherServlet</code>的<code>initSrategies</code>方法来初始化9大组件。<h3 id=1-2-2、默认初始化组件><a class=headerlink href=#1-2-2、默认初始化组件 title=1.2.2、默认初始化组件></a>1.2.2、默认初始化组件</h3><p>默认会加载<code>DispatcherServlet.properties</code>文件，并初始化文件中已经编写的组件。如果显式配置了相关组件，那么以显式配置的为主，而不会加载和初始化默认的组件。以下是默认加载的组件：<ul><li><strong>LocaleResolver</strong><ul><li>AcceptHeaderLocaleResolver</ul><li><strong>ThemeResolver</strong><ul><li>FixedThemeResolver</ul><li><strong>HandlerMapping</strong><ul><li>BeanNameUrlHandlerMapping<li>RequestMappingHandlerMapping<li>RouterFunctionMapping</ul><li><strong>HandlerAdapter</strong><ul><li>HttpRequestHandlerAdapter<li>SimpleControllerHandlerAdapter<li>RequestMappingHandlerAdapter<li>HandlerFunctionAdapter</ul><li><strong>HandlerExceptionResolver</strong><ul><li>ExceptionHandlerExceptionResolver<li>ResponseStatusExceptionResolver<li>DefaultHandlerExceptionResolver</ul><li><strong>RequestToViewNameTranslator</strong><ul><li>DefaultRequestToViewNameTranslator</ul><li><strong>ViewResolver</strong><ul><li>InternalResourceViewResolver</ul><li><strong>FlashMapManager</strong><ul><li>SessionFlashMapManager</ul></ul><h3 id=1-2-3、mvc-default-servlet-handler><a class=headerlink href=#1-2-3、mvc-default-servlet-handler title=1.2.3、mvc:default-servlet-handler></a>1.2.3、mvc:default-servlet-handler</h3><p>该标签作用如下：<ul><li>使用<code>DefaultServletHandlerBeanDefinitionParser</code>向容器中注入<code>SimpleUrlHandlerMapping</code>。<li><code>SimpleUrlHandlerMapping</code>注入容器后，默认的<code>RequestMappingHandlerMapping</code>就不再注入。<li><code>mvc:resources</code>标签也会向容器中注入一个<code>SimpleUrlHandlerMapping</code>。<li>处理<code>@RequestMapping</code>注解需要<code>RequestMappingHandlerMapping</code>，所以以上两个标签不能解决这个问题。</ul><h3 id=1-2-4、mvc-annotation-driven><a class=headerlink href=#1-2-4、mvc-annotation-driven title=1.2.4、mvc:annotation-driven></a>1.2.4、mvc:annotation-driven</h3><p>该标签的作用如下：<ul><li>Spring 3.0.x版本会注入<code>DefaultAnnotationHandlerMapping、AnnotationMethodHandlerAdapter</code>。<li>Spring 3.1.x版本开始会注入<code>RequestMappingHandlerMapping、RequestMappingHandlerAdapter</code>。<li>会为<code>RequestMappingHandlerAdapter</code>设置消息转化器等。</ul><h2 id=1-3、-EnableWebMvc><a class=headerlink href=#1-3、-EnableWebMvc title=1.3、@EnableWebMvc></a>1.3、@EnableWebMvc</h2><p>该注解通过<code>@import</code>注解导入一个配置类<code>DelegatingWebMvcConfiguration</code>，该类继承了<code>WebMvcConfigurationSupport</code>。<p><strong>（1）<code>DelegatingWebMvcConfiguration</code>的<code>setConfigurers</code>方法会收集接口<code>WebMvcConfigurer</code>的所有实现类</strong><p>通过注解<code>Autowired</code>修饰方法<code>setConfigurers(List&LTWebMvcConfigurer> configurers)</code>来收集接口<code>WebMvcConfigurer</code>的所有实现类，这些实现类其实就是配置类，包括系统已经存在的和自定义的。<p>将这些收集到的配置类放入配置组合类<code>WebMvcConfigurerComposite</code>中，后期<code>WebMvcConfigurationSupport</code>在初始化默认组件时可以遍历这些系统配置类或自定义配置类，将我们自定义的功能应用到这些默认组件中，比如：自定义参数解析器、自定义返回值处理器、自定义消息转换器等，后期这些默认组件在工作时就会使用到我们的自定义功能来进行相关处理。<p><strong>（2）<code>WebMvcConfigurationSupport</code>会初始化多个默认组件并注入到容器中</strong>，详情见1.2.2中的内容。<p>这里以<code>RequestMappingHandlerAdapter</code>为例进行分析。<p>在创建<code>RequestMappingHandlerAdapter</code>实例并注入到容器前会对其进行初始化，比如为其设置消息转换器、参数解析器、返回值处理器等工具，使得<code>RequestMappingHandlerAdapter</code>在执行处理器方法时进行相关操作。<h2 id=1-4、HTTP请求处理流程><a class=headerlink href=#1-4、HTTP请求处理流程 title=1.4、HTTP请求处理流程></a>1.4、HTTP请求处理流程</h2><p>一个Http请求处理的流程如下：<p><strong>（1）<code>HttpServlet</code>将<code>ServletRequest、ServletResponse</code>转为<code>HttpServletRequest、HttpServletResponse</code></strong><p>在<code>HttpServlet</code>的<code>service</code>方法中将<code>ServletRequest、ServletResponse</code>转为<code>HttpServletRequest、HttpServletResponse</code>，然后根据不同的请求方式将请求转发给<code>FrameworkServlet</code><p><strong>（2）<code>FrameworkServlet</code>做一些初始化和记录后将请求转发给<code>DispatcherServlet</code></strong><p><code>FrameworkServlet</code>在方法<code>processRequest</code>中进行相关初始化和记录后将请求转发给<code>DispatcherServlet</code>的<code>doService</code>方法。<p><strong>（3）<code>DispatcherServlet</code>处理请求并发布请求处理完毕事件</strong><p>在<code>DispatcherServlet</code>的<code>doService</code>方法中对请求对象<code>HttpServletRequest</code>做一些初始化，然后调用<code>doDispatch</code>方法来处理这个请求。请求处理期间会调用拦截器的方法，请求处理完成后会发布<code>ServletRequestHandledEvent</code>事件。</div><footer class=post-footer><div class=post-tags><a href=/tags/Spring/ rel=tag># Spring</a><a href=/tags/SpringMVC/ rel=tag># SpringMVC</a></div><div class=post-nav><div class=post-nav-item><a href=/2024/08/21/SpringIOC/ rel=prev title=Spring系列-SpringIOC> <i class="fa fa-angle-left"></i> Spring系列-SpringIOC </a></div><div class=post-nav-item><a href=/2024/08/21/Spring%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8/ rel=next title=Spring系列-基础应用> Spring系列-基础应用 <i class="fa fa-angle-right"></i> </a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© <span itemprop=copyrightYear>2024</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>豪哥</span></div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/sidebar.js></script><script src=/js/next-boot.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=/js/third-party/search/local-search.js></script>